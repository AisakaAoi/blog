---
title: Python-ç¬¬19ç¯‡ã€Šé¢å‘å¯¹è±¡ç¼–ç¨‹ã€‹
categories:
  - ğŸŒ™é€¢å‚æ‚è°ˆä¸æ¬è¿
  - â­æœæœè¯¾ç¨‹
abbrlink: f5c263b8
date: 2026-02-03 04:12:08
tags:
---

### å¯¼è¯­

å‰é¢æˆ‘ä»¬å†™çš„ä»£ç éƒ½æ˜¯â€œä¸€è‚¡è„‘â€é¡ºåºæ‰§è¡Œï¼Œåƒè®°æµæ°´è´¦ã€‚ä½†ç°å®ä¸–ç•Œçš„è´¢åŠ¡ç³»ç»Ÿä¸æ˜¯è¿™æ ·çš„ï¼šå‘˜å·¥ã€éƒ¨é—¨ã€å·¥èµ„å•ã€æŠ¥é”€å•...æ¯ä¸ªéƒ½æ˜¯â€œç‹¬ç«‹ä¸ªä½“â€ï¼Œäº’ç›¸åä½œã€‚ä»Šå¤©å’±ä»¬ç”¨è´¢åŠ¡æœ€ç†Ÿæ‚‰çš„å…¬å¸ç»„ç»‡æ¶æ„ï¼Œæ¥ç†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ï¼šæŠŠä»£ç æ‹†æˆä¸€ä¸ªä¸ªâ€œéƒ¨é—¨â€ï¼Œæ¯ä¸ªéƒ¨é—¨æœ‰è‡ªå·±çš„â€œèŒè´£â€å’Œâ€œè´¦æœ¬â€ï¼Œæ—¢èƒ½ç‹¬ç«‹å·¥ä½œåˆèƒ½äº’ç›¸é…åˆã€‚

<!--more-->

***

### æœ¬ç¯‡ç›®æ ‡

- ç”¨å…¬å¸ç»„ç»‡æ¶æ„ç†è§£â€œç±»â€å’Œâ€œå¯¹è±¡â€
- æŒæ¡å°è£…ï¼šä¿æŠ¤æ•°æ®ä¸è¢«éšæ„ç¯¡æ”¹
- ç†è§£ç»§æ‰¿ï¼šå­å…¬å¸ç»§æ‰¿æ€»å…¬å¸åˆ¶åº¦
- ä½“ä¼šå¤šæ€ï¼šä¸åŒéƒ¨é—¨å¯¹åŒä¸€æŒ‡ä»¤çš„ä¸åŒå¤„ç†
- å®æˆ˜ï¼šæ„å»ºå¯æ‰©å±•çš„å‘˜å·¥ç®¡ç†ç³»ç»Ÿ

***

### ä¸€ã€ä¸ç”¨å®‰è£…ï¼Œç›´æ¥å¼€å¹²

é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯Pythonçš„å†…ç½®åŠŸèƒ½ï¼Œæ— éœ€é¢å¤–å®‰è£…åº“ã€‚å‡†å¤‡å¥½æˆ‘ä»¬çš„è€æœ‹å‹å°±è¡Œï¼š
```python
# çº¯Pythonï¼Œæ— éœ€å®‰è£…
import json
from datetime import datetime
from typing import List, Dict
import os
```

***

### äºŒã€ç±»å’Œå¯¹è±¡ï¼šç”¨å…¬å¸ç»„ç»‡æ¶æ„ç†è§£

#### 2.1 ä»€ä¹ˆæ˜¯ç±»ï¼Ÿä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Ÿ

**ç±»ï¼ˆClassï¼‰ = å…¬å¸éƒ¨é—¨ç« ç¨‹**
å®šä¹‰äº†â€œå‘˜å·¥åº”è¯¥æœ‰ä»€ä¹ˆå±æ€§ï¼ˆå§“åã€å·¥å·ã€è–ªèµ„ï¼‰ï¼Œèƒ½åšä»€ä¹ˆï¼ˆä¸Šç­ã€è¯·å‡ã€æŠ¥é”€ï¼‰â€

**å¯¹è±¡ï¼ˆObjectï¼‰ = å…·ä½“çš„æŸä¸ªå‘˜å·¥**
æ ¹æ®ç« ç¨‹åˆ›å»ºçš„â€œæ´»ç”Ÿç”Ÿçš„äººâ€ï¼Œæ¯”å¦‚â€œå¼ ä¸‰ï¼Œå·¥å·1001ï¼Œè–ªèµ„15000â€

```python
# ========== å®šä¹‰"å‘˜å·¥"ç±»ï¼ˆéƒ¨é—¨ç« ç¨‹ï¼‰ ==========
class Employee:
    """
    å‘˜å·¥ç±» - å°±åƒä¸€ä¸ªå…¬å¸çš„ã€Šå‘˜å·¥æ‰‹å†Œã€‹
    è§„å®šäº†æ‰€æœ‰å‘˜å·¥åº”è¯¥æœ‰çš„ä¿¡æ¯å’Œæ–¹æ³•
    """
    
    # ç±»å±æ€§ï¼šæ‰€æœ‰å‘˜å·¥å…±äº«ï¼ˆå°±åƒå…¬å¸çš„å…¬ç§¯é‡‘æ¯”ä¾‹ï¼‰
    company_name = "æ™ºæ…§è´¢åŠ¡ç§‘æŠ€æœ‰é™å…¬å¸"
    social_insurance_rate = 0.105  # äº”é™©ä¸€é‡‘æ¯”ä¾‹
    
    def __init__(self, name: str, employee_id: str, department: str, base_salary: float):
        """
        åˆå§‹åŒ–æ–¹æ³•ï¼šæ–°å‘˜å·¥å…¥èŒæ—¶è°ƒç”¨
        å°±åƒæ–°å‘˜å·¥å¡«å†™å…¥èŒç™»è®°è¡¨
        """
        self.name = name  # å®ä¾‹å±æ€§ï¼šå§“å
        self.employee_id = employee_id  # å·¥å·
        self.department = department  # éƒ¨é—¨
        self.base_salary = base_salary  # åŸºæœ¬å·¥èµ„
        self.onboard_date = datetime.now().strftime('%Y-%m-%d')  # å…¥èŒæ—¥æœŸ
        self.is_active = True  # æ˜¯å¦åœ¨èŒ
        
        print(f"âœ… æ–°å‘˜å·¥å…¥èŒæˆåŠŸï¼š{name}ï¼ˆ{employee_id}ï¼‰")
    
    def get_monthly_salary(self) -> float:
        """
        è®¡ç®—æœˆè–ªï¼ˆç¨åä¼°ç®—ï¼‰
        è¿™æ˜¯ä¸€ä¸ª"æ–¹æ³•"ï¼Œå‘˜å·¥å¯ä»¥"åš"çš„è®¡ç®—
        """
        insurance = self.base_salary * self.social_insurance_rate
        taxable = self.base_salary - insurance - 5000  # èµ·å¾ç‚¹
        
        if taxable <= 0:
            tax = 0
        elif taxable <= 36000:
            tax = taxable * 0.03
        else:
            tax = taxable * 0.10 - 2520  # ç®€åŒ–è®¡ç®—
        
        return self.base_salary - insurance - tax
    
    def take_leave(self, days: int):
        """è¯·å‡"""
        if days <= 0:
            print("âŒ è¯·å‡å¤©æ•°å¿…é¡»å¤§äº0")
            return
        
        if days > 10:
            print(f"âš ï¸ {self.name}è¯·å‡{days}å¤©ï¼Œéœ€è¦CEOå®¡æ‰¹ï¼")
        else:
            print(f"âœ… {self.name}ï¼ˆ{self.department}ï¼‰è¯·å‡{days}å¤©å·²æ‰¹å‡†")
    
    def __str__(self):
        """æ‰“å°å‘˜å·¥ä¿¡æ¯"""
        return f"ã€å‘˜å·¥ã€‘{self.name} | å·¥å·:{self.employee_id} | éƒ¨é—¨:{self.department} | è–ªèµ„:Â¥{self.base_salary:,.2f}"

# æµ‹è¯•ï¼šåˆ›å»ºå‡ ä¸ªå‘˜å·¥å¯¹è±¡
print("=" * 50)
print("å‘˜å·¥å…¥èŒæ¨¡æ‹Ÿ")
print("=" * 50)

# æ ¹æ®"å‘˜å·¥æ‰‹å†Œ"ï¼ˆç±»ï¼‰åˆ›å»ºå…·ä½“å‘˜å·¥ï¼ˆå¯¹è±¡ï¼‰
emp1 = Employee("å¼ ä¸‰", "E1001", "è´¢åŠ¡éƒ¨", 15000)
emp2 = Employee("æå››", "E1002", "é”€å”®éƒ¨", 12000)
emp3 = Employee("ç‹äº”", "E1003", "æŠ€æœ¯éƒ¨", 20000)

# è°ƒç”¨å¯¹è±¡æ–¹æ³•
print(f"\n{emp1}")
print(f"å®é™…æœˆè–ªï¼šÂ¥{emp1.get_monthly_salary():,.2f}")
emp1.take_leave(3)

print(f"\n{emp2}")
emp2.take_leave(15)  # è§¦å‘é•¿å‡æœŸæé†’
```

***

### ä¸‰ã€å°è£…ï¼šè´¢åŠ¡å®¤çš„ä¿é™©ç®±

**å°è£… = ä¿é™©ç®± + æƒé™ç®¡ç†**
å†…éƒ¨æ•°æ®ï¼ˆå·¥èµ„æ˜ç»†ï¼‰ä¸èƒ½éšä¾¿æ”¹ï¼Œå¿…é¡»é€šè¿‡â€œè§„å®šæµç¨‹â€ï¼ˆæ–¹æ³•ï¼‰è®¿é—®

```python
# ========== å°è£…æ¼”ç¤ºï¼šè–ªèµ„ä¿å¯† ==========
class SalaryManager:
    """
    è–ªèµ„ç®¡ç†å™¨ï¼šå°è£…äº†æ•æ„Ÿæ•°æ®
    å°±åƒè´¢åŠ¡éƒ¨çš„ä¿é™©æŸœï¼Œå¯†ç åªæœ‰ç‰¹å®šäººèƒ½å¼€
    """
    
    def __init__(self):
        self.__salary_data = {}  # ç§æœ‰å±æ€§ï¼šåŒä¸‹åˆ’çº¿å¼€å¤´ï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®
        self.__access_log = []   # è®¿é—®æ—¥å¿—ï¼Œä¹Ÿæ˜¯ç§æœ‰çš„
    
    def add_salary_record(self, emp_id: str, month: str, amount: float):
        """æ·»åŠ è–ªèµ„è®°å½•ï¼ˆåªæœ‰è¿™ä¸ªæ–¹æ³•èƒ½æ“ä½œæ•°æ®ï¼‰"""
        key = f"{emp_id}_{month}"
        self.__salary_data[key] = {
            'é‡‘é¢': amount,
            'å½•å…¥æ—¶é—´': datetime.now().strftime('%Y-%m-%d %H:%M:%S')
        }
        print(f"âœ… è–ªèµ„è®°å½•å·²åŠ å¯†ä¿å­˜")
    
    def get_salary(self, emp_id: str, month: str, requester: str) -> float:
        """
        è·å–è–ªèµ„ï¼šéœ€è¦è®°å½•è°åœ¨æŸ¥
        å°±åƒè´¢åŠ¡éƒ¨è¦æ±‚æŸ¥å·¥èµ„å¿…é¡»ç™»è®°
        """
        key = f"{emp_id}_{month}"
        
        if key in self.__salary_data:
            # è®°å½•è®¿é—®æ—¥å¿—
            self.__access_log.append({
                'æŸ¥è¯¢äºº': requester,
                'å‘˜å·¥': emp_id,
                'æœˆä»½': month,
                'æŸ¥è¯¢æ—¶é—´': datetime.now().strftime('%Y-%m-%d %H:%M:%S')
            })
            
            return self.__salary_data[key]['é‡‘é¢']
        else:
            print("âš ï¸ æœªæ‰¾åˆ°è¯¥å‘˜å·¥è–ªèµ„è®°å½•")
            return 0
    
    def show_access_log(self):
        """æŸ¥çœ‹è®¿é—®æ—¥å¿—ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰"""
        print("\n" + "=" * 40)
        print("è–ªèµ„æŸ¥è¯¢è®¿é—®æ—¥å¿—")
        print("=" * 40)
        for log in self.__access_log:
            print(f"{log['æŸ¥è¯¢æ—¶é—´']} | {log['æŸ¥è¯¢äºº']} æŸ¥è¯¢äº† {log['å‘˜å·¥']} çš„ {log['æœˆä»½']} å·¥èµ„")

# æµ‹è¯•å°è£…
salary_mgr = SalaryManager()
salary_mgr.add_salary_record("E1001", "2025-01", 12500)

# åªèƒ½é€šè¿‡æ–¹æ³•è®¿é—®
salary = salary_mgr.get_salary("E1001", "2025-01", "äººäº‹ä¸“å‘˜å°ç‹")
print(f"æŸ¥è¯¢åˆ°è–ªèµ„ï¼šÂ¥{salary:,.2f}")

# æ— æ³•ç›´æ¥è®¿é—®ç§æœ‰å±æ€§ï¼ˆä¼šæŠ¥é”™ï¼‰
# print(salary_mgr.__salary_data)  # æŠ¥é”™ï¼

# æŸ¥çœ‹è®¿é—®æ—¥å¿—
salary_mgr.show_access_log()
```

***

### å››ã€ç»§æ‰¿ï¼šæ€»å…¬å¸å’Œå­å…¬å¸

**ç»§æ‰¿ = å­å…¬å¸ç»§æ‰¿æ€»å…¬å¸åˆ¶åº¦ + è‡ªå·±ç‰¹è‰²**
é”€å”®éƒ¨å‘˜å·¥ä¹Ÿæ˜¯å‘˜å·¥ï¼Œä½†æœ‰é¢å¤–çš„â€œææˆâ€å±æ€§

```python
# ========== ç»§æ‰¿æ¼”ç¤ºï¼šä¸åŒéƒ¨é—¨å‘˜å·¥ ==========
class SalesEmployee(Employee):
    """
    é”€å”®éƒ¨å‘˜å·¥ï¼šç»§æ‰¿è‡ªEmployeeï¼Œå¢åŠ é”€å”®ææˆ
    å°±åƒå­å…¬å¸æœ‰è‡ªå·±çš„ç‰¹æ®Šè§„å®š
    """
    
    def __init__(self, name: str, employee_id: str, base_salary: float, commission_rate: float = 0.05):
        # è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ï¼ˆç»§æ‰¿æ€»å…¬å¸çš„å…¥èŒæµç¨‹ï¼‰
        super().__init__(name, employee_id, "é”€å”®éƒ¨", base_salary)
        self.commission_rate = commission_rate  # ææˆæ¯”ä¾‹
        self.monthly_sales = 0  # æœ¬æœˆé”€å”®é¢
    
    def record_sales(self, amount: float):
        """è®°å½•é”€å”®é¢"""
        self.monthly_sales += amount
        print(f"âœ… {self.name}æœ¬æœˆé”€å”®é¢å¢åŠ Â¥{amount:,.2f}ï¼Œç´¯è®¡Â¥{self.monthly_sales:,.2f}")
    
    def get_monthly_salary(self) -> float:
        """
        é‡å†™çˆ¶ç±»æ–¹æ³•ï¼šé”€å”®è–ªèµ„ = åŸºæœ¬å·¥èµ„ + ææˆ - ç¨è´¹
        è¿™å°±æ˜¯å¤šæ€ï¼šåŒæ ·çš„"è®¡ç®—å·¥èµ„"æŒ‡ä»¤ï¼Œé”€å”®å’Œè´¢åŠ¡æ‰§è¡Œæ–¹å¼ä¸åŒ
        """
        base_salary = super().get_monthly_salary()  # å…ˆç®—åŸºæœ¬å·¥èµ„ç¨å
        commission = self.monthly_sales * self.commission_rate
        
        # ææˆéƒ¨åˆ†ä¹Ÿæ‰£ç¨ï¼ˆç®€åŒ–ï¼‰
        commission_tax = commission * 0.10 if commission > 0 else 0
        
        total_salary = base_salary + commission - commission_tax
        
        print(f"ğŸ’° {self.name}è–ªèµ„æ„æˆï¼šåº•è–ªÂ¥{base_salary:,.2f} + ææˆÂ¥{commission:,.2f} - ç¨è´¹Â¥{commission_tax:,.2f}")
        
        return total_salary
    
    def __str__(self):
        """é‡å†™çˆ¶ç±»çš„å­—ç¬¦ä¸²è¡¨ç¤º"""
        return f"ã€é”€å”®ç²¾è‹±ã€‘{self.name} | å·¥å·:{self.employee_id} | ææˆæ¯”ä¾‹:{self.commission_rate:.1%} | æœ¬æœˆä¸šç»©:Â¥{self.monthly_sales:,.2f}"

class TechEmployee(Employee):
    """
    æŠ€æœ¯éƒ¨å‘˜å·¥ï¼šæœ‰é¡¹ç›®å¥–é‡‘
    """
    
    def __init__(self, name: str, employee_id: str, base_salary: float, project_bonus: float = 0):
        super().__init__(name, employee_id, "æŠ€æœ¯éƒ¨", base_salary)
        self.project_bonus = project_bonus
    
    def get_monthly_salary(self) -> float:
        """æŠ€æœ¯éƒ¨è–ªèµ„ï¼šåŸºæœ¬å·¥èµ„ + é¡¹ç›®å¥–é‡‘"""
        base_salary = super().get_monthly_salary()
        total = base_salary + self.project_bonus
        
        print(f"ğŸ’° {self.name}è–ªèµ„æ„æˆï¼šåº•è–ªÂ¥{base_salary:,.2f} + é¡¹ç›®å¥–é‡‘Â¥{self.project_bonus:,.2f}")
        
        return total

# æµ‹è¯•ç»§æ‰¿
print("\n" + "=" * 50)
print("ä¸åŒéƒ¨é—¨å‘˜å·¥æµ‹è¯•")
print("=" * 50)

sales_emp = SalesEmployee("èµµå…­", "E2001", 8000, commission_rate=0.08)
sales_emp.record_sales(50000)  # æœ¬æœˆå–5ä¸‡
sales_emp.record_sales(30000)  # åˆå–3ä¸‡

print(f"\n{sales_emp}")
print(f"å®é™…æœˆè–ªï¼šÂ¥{sales_emp.get_monthly_salary():,.2f}")

tech_emp = TechEmployee("å­™ä¸ƒ", "E3001", 18000, project_bonus=5000)
print(f"\n{tech_emp}")
print(f"å®é™…æœˆè–ªï¼šÂ¥{tech_emp.get_monthly_salary():,.2f}")
```

***

### äº”ã€å¤šæ€ï¼šåŒä¸€æ¡æŒ‡ä»¤ï¼Œä¸åŒååº”

**å¤šæ€ = ä¸åŒéƒ¨é—¨å¯¹â€œæŠ¥é”€â€çš„ä¸åŒå®¡æ‰¹æµç¨‹**
éƒ½æ˜¯è°ƒç”¨`apply_reimbursement()`æ–¹æ³•ï¼Œä½†è´¢åŠ¡éƒ¨å’Œé”€å”®éƒ¨çš„å†…éƒ¨å®ç°å®Œå…¨ä¸åŒ

```python
# ========== å¤šæ€æ¼”ç¤ºï¼šæŠ¥é”€æµç¨‹ ==========
class Department:
    """éƒ¨é—¨åŸºç±»"""
    
    def __init__(self, name: str, manager: str):
        self.name = name
        self.manager = manager
    
    def apply_reimbursement(self, employee: Employee, amount: float, reason: str):
        """
        ç”³è¯·æŠ¥é”€ï¼šå„ä¸ªéƒ¨é—¨æœ‰ä¸åŒè§„åˆ™
        è¿™å°±æ˜¯å¤šæ€ï¼šåŒæ ·çš„æ–¹æ³•åï¼Œä¸åŒéƒ¨é—¨æœ‰ä¸åŒå®ç°
        """
        raise NotImplementedError("å­ç±»å¿…é¡»å®ç°æ­¤æ–¹æ³•")

class FinanceDepartment(Department):
    """è´¢åŠ¡éƒ¨ï¼šæŠ¥é”€å®¡æ ¸æœ€ä¸¥"""
    
    def apply_reimbursement(self, employee: Employee, amount: float, reason: str):
        print(f"\nã€è´¢åŠ¡éƒ¨æŠ¥é”€å®¡æ ¸ã€‘")
        print(f"ç”³è¯·äºº: {employee.name}")
        print(f"é‡‘é¢: Â¥{amount:,.2f}")
        print(f"äº‹ç”±: {reason}")
        
        if amount > 5000:
            print("âš ï¸ é‡‘é¢è¶…è¿‡Â¥5000ï¼Œéœ€è¦CFOé¢å¤–å®¡æ‰¹")
            return False
        else:
            print("âœ… å®¡æ ¸é€šè¿‡ï¼Œ3ä¸ªå·¥ä½œæ—¥å†…æ‰“æ¬¾")
            return True

class SalesDepartment(Department):
    """é”€å”®éƒ¨ï¼šä¸ºäº†ä¸šç»©ï¼ŒæŠ¥é”€çµæ´»"""
    
    def apply_reimbursement(self, employee: Employee, amount: float, reason: str):
        print(f"\nã€é”€å”®éƒ¨æŠ¥é”€å®¡æ ¸ã€‘")
        print(f"ç”³è¯·äºº: {employee.name}ï¼ˆæœ¬æœˆä¸šç»©Â¥{employee.monthly_sales if hasattr(employee, 'monthly_sales') else 0:,.2f}ï¼‰")
        
        # é”€å”®ä¸šç»©å¥½çš„å‘˜å·¥ï¼ŒæŠ¥é”€é¢åº¦è‡ªåŠ¨æé«˜
        if hasattr(employee, 'monthly_sales') and employee.monthly_sales > 100000:
            print("ğŸ‰ ä¸šç»©ä¼˜ç§€ï¼ŒæŠ¥é”€å¿«é€Ÿé€šé“ï¼")
            print("âœ… å®¡æ ¸é€šè¿‡ï¼Œ1ä¸ªå·¥ä½œæ—¥å†…æ‰“æ¬¾")
            return True
        
        if amount > 10000:
            print("âš ï¸ é‡‘é¢è¾ƒå¤§ï¼Œéœ€è¦ç»ç†å®¡æ‰¹")
            return False
        else:
            print("âœ… å®¡æ ¸é€šè¿‡")
            return True

class TechDepartment(Department):
    """æŠ€æœ¯éƒ¨ï¼šå…³æ³¨æ˜¯å¦åˆç†"""
    
    def apply_reimbursement(self, employee: Employee, amount: float, reason: str):
        print(f"\nã€æŠ€æœ¯éƒ¨æŠ¥é”€å®¡æ ¸ã€‘")
        print(f"ç”³è¯·äºº: {employee.name}")
        print(f"äº‹ç”±: {reason}")
        
        # æ£€æŸ¥æ˜¯å¦åŒ…å«æŠ€æœ¯å…³é”®è¯
        tech_keywords = ['æœåŠ¡å™¨', 'åŸŸå', 'è½¯ä»¶', 'æŠ€æœ¯ä¹¦ç±', 'åŸ¹è®­']
        if any(keyword in reason for keyword in tech_keywords):
            print("âœ… æŠ€æœ¯ç›¸å…³æ”¯å‡ºï¼Œä¼˜å…ˆæ‰¹å‡†")
            return True
        else:
            print("â„¹ï¸ éæŠ€æœ¯æ”¯å‡ºï¼ŒæŒ‰æ ‡å‡†æµç¨‹å®¡æ‰¹")
            return amount <= 3000

# æµ‹è¯•å¤šæ€
print("\n" + "=" * 50)
print("æŠ¥é”€å®¡æ‰¹æµ‹è¯•ï¼ˆå¤šæ€ï¼‰")
print("=" * 50)

# åˆ›å»ºéƒ¨é—¨å¯¹è±¡
finance_dept = FinanceDepartment("è´¢åŠ¡éƒ¨", "å¼ ç»ç†")
sales_dept = SalesDepartment("é”€å”®éƒ¨", "æç»ç†")
tech_dept = TechDepartment("æŠ€æœ¯éƒ¨", "ç‹ç»ç†")

# å¼ ä¸‰ï¼ˆè´¢åŠ¡éƒ¨ï¼‰ç”³è¯·æŠ¥é”€
finance_dept.apply_reimbursement(emp1, 8000, "å¹´åº¦å®¡è®¡æœåŠ¡è´¹")

# èµµå…­ï¼ˆé”€å”®éƒ¨ï¼‰ç”³è¯·æŠ¥é”€
sales_dept.apply_reimbursement(sales_emp, 12000, "å®¢æˆ·æ‹›å¾…è´¹")

# å­™ä¸ƒï¼ˆæŠ€æœ¯éƒ¨ï¼‰ç”³è¯·æŠ¥é”€
tech_dept.apply_reimbursement(tech_emp, 2500, "è´­ä¹°æŠ€æœ¯ä¹¦ç±")
tech_dept.apply_reimbursement(tech_emp, 2500, "å›¢é˜Ÿèšé¤è´¹")

# åŒæ ·çš„"apply_reimbursement"è°ƒç”¨ï¼Œä¸åŒéƒ¨é—¨æœ‰ä¸åŒå®ç°ï¼
```

***

### å…­ã€å®æˆ˜ï¼šæ„å»ºå‘˜å·¥ç®¡ç†ç³»ç»Ÿ

æ•´åˆæ‰€æœ‰æ¦‚å¿µï¼Œåšä¸€ä¸ªèƒ½ç”¨çš„ç³»ç»Ÿã€‚

```python
# ========== å‘˜å·¥ç®¡ç†ç³»ç»Ÿ - å®Œæ•´ç‰ˆ ==========
class EmployeeManagementSystem:
    """
    å‘˜å·¥ç®¡ç†ç³»ç»Ÿï¼šä½¿ç”¨é¢å‘å¯¹è±¡æ–¹å¼ç®¡ç†
    """
    
    def __init__(self, data_file="employees.json"):
        self.data_file = data_file
        self.employees: List[Employee] = []
        self.departments: Dict[str, Department] = {}
        self.load_data()
        self.init_departments()
    
    def init_departments(self):
        """åˆå§‹åŒ–å„éƒ¨é—¨"""
        self.departments["è´¢åŠ¡éƒ¨"] = FinanceDepartment("è´¢åŠ¡éƒ¨", "å¼ ç»ç†")
        self.departments["é”€å”®éƒ¨"] = SalesDepartment("é”€å”®éƒ¨", "æç»ç†")
        self.departments["æŠ€æœ¯éƒ¨"] = TechDepartment("æŠ€æœ¯éƒ¨", "ç‹ç»ç†")
    
    def add_employee(self):
        """æ·»åŠ å‘˜å·¥"""
        print("\n" + "=" * 40)
        print("æ·»åŠ æ–°å‘˜å·¥")
        print("=" * 40)
        
        name = input("å§“å: ").strip()
        emp_id = input("å·¥å·: ").strip()
        dept = input("éƒ¨é—¨ï¼ˆè´¢åŠ¡éƒ¨/é”€å”®éƒ¨/æŠ€æœ¯éƒ¨ï¼‰: ").strip()
        salary = float(input("åŸºæœ¬å·¥èµ„: ").strip())
        
        if dept == "é”€å”®éƒ¨":
            commission = float(input("ææˆæ¯”ä¾‹ï¼ˆå¦‚0.08è¡¨ç¤º8%ï¼‰: ").strip())
            emp = SalesEmployee(name, emp_id, salary, commission)
        elif dept == "æŠ€æœ¯éƒ¨":
            bonus = float(input("é¡¹ç›®å¥–é‡‘: ").strip())
            emp = TechEmployee(name, emp_id, salary, bonus)
        else:
            emp = Employee(name, emp_id, dept, salary)
        
        self.employees.append(emp)
        print(f"\nâœ… å‘˜å·¥æ·»åŠ æˆåŠŸï¼")
        print(emp)
    
    def list_employees(self):
        """åˆ—å‡ºæ‰€æœ‰å‘˜å·¥"""
        print("\n" + "=" * 50)
        print("å‘˜å·¥åˆ—è¡¨")
        print("=" * 50)
        
        if not self.employees:
            print("ğŸ“­ æš‚æ— å‘˜å·¥æ•°æ®")
            return
        
        for i, emp in enumerate(self.employees, 1):
            print(f"\n{i}. {emp}")
    
    def calculate_all_salaries(self):
        """è®¡ç®—æ‰€æœ‰å‘˜å·¥æœ¬æœˆè–ªèµ„"""
        print("\n" + "=" * 50)
        print("è–ªèµ„è®¡ç®—")
        print("=" * 50)
        
        if not self.employees:
            print("âš ï¸ æš‚æ— å‘˜å·¥æ•°æ®")
            return
        
        total_salary = 0
        
        for emp in self.employees:
            salary = emp.get_monthly_salary()
            total_salary += salary
            print(f"  {emp.name}: Â¥{salary:,.2f}")
        
        print(f"\nğŸ’° æœ¬æœˆå·¥èµ„æ€»æ”¯å‡º: Â¥{total_salary:,.2f}")
    
    def reimbursement_request(self):
        """æŠ¥é”€ç”³è¯·"""
        print("\n" + "=" * 40)
        print("æŠ¥é”€ç”³è¯·")
        print("=" * 40)
        
        if not self.employees:
            print("âš ï¸ æš‚æ— å‘˜å·¥æ•°æ®")
            return
        
        # é€‰æ‹©å‘˜å·¥
        self.list_employees()
        idx = int(input("é€‰æ‹©å‘˜å·¥ç¼–å·ï¼ˆæ•°å­—ï¼‰: ").strip()) - 1
        
        if idx < 0 or idx >= len(self.employees):
            print("âŒ ç¼–å·é”™è¯¯")
            return
        
        emp = self.employees[idx]
        amount = float(input("æŠ¥é”€é‡‘é¢: ").strip())
        reason = input("æŠ¥é”€äº‹ç”±: ").strip()
        
        # è·å–å‘˜å·¥æ‰€åœ¨éƒ¨é—¨è¿›è¡Œå®¡æ‰¹
        if emp.department in self.departments:
            self.departments[emp.department].apply_reimbursement(emp, amount, reason)
        else:
            print("âš ï¸ è¯¥éƒ¨é—¨æš‚æ— å®¡æ‰¹æµç¨‹")
    
    def save_data(self):
        """ä¿å­˜æ•°æ®åˆ°JSON"""
        data = {
            'employees': [],
            'update_time': datetime.now().strftime('%Y-%m-%d %H:%M:%S')
        }
        
        for emp in self.employees:
            emp_data = {
                'name': emp.name,
                'employee_id': emp.employee_id,
                'department': emp.department,
                'base_salary': emp.base_salary,
                'type': type(emp).__name__  # ä¿å­˜ç±»å‹ï¼Œç”¨äºåç»­åŠ è½½
            }
            
            # ä¿å­˜å­ç±»ç‰¹æœ‰å±æ€§
            if isinstance(emp, SalesEmployee):
                emp_data['commission_rate'] = emp.commission_rate
                emp_data['monthly_sales'] = emp.monthly_sales
            elif isinstance(emp, TechEmployee):
                emp_data['project_bonus'] = emp.project_bonus
            
            data['employees'].append(emp_data)
        
        with open(self.data_file, 'w', encoding='utf-8') as f:
            json.dump(data, f, ensure_ascii=False, indent=2)
        
        print(f"âœ… æ•°æ®å·²ä¿å­˜åˆ° {self.data_file}")
    
    def load_data(self):
        """ä»JSONåŠ è½½æ•°æ®"""
        if not os.path.exists(self.data_file):
            return
        
        try:
            with open(self.data_file, 'r', encoding='utf-8') as f:
                data = json.load(f)
            
            self.employees = []
            
            for emp_data in data.get('employees', []):
                emp_type = emp_data.get('type', 'Employee')
                
                if emp_type == 'SalesEmployee':
                    emp = SalesEmployee(
                        emp_data['name'],
                        emp_data['employee_id'],
                        emp_data['base_salary'],
                        emp_data.get('commission_rate', 0.05)
                    )
                    emp.monthly_sales = emp_data.get('monthly_sales', 0)
                elif emp_type == 'TechEmployee':
                    emp = TechEmployee(
                        emp_data['name'],
                        emp_data['employee_id'],
                        emp_data['base_salary'],
                        emp_data.get('project_bonus', 0)
                    )
                else:
                    emp = Employee(
                        emp_data['name'],
                        emp_data['employee_id'],
                        emp_data['department'],
                        emp_data['base_salary']
                    )
                
                self.employees.append(emp)
            
            print(f"ğŸ“‚ å·²åŠ è½½ {len(self.employees)} åå‘˜å·¥æ•°æ®")
            
        except Exception as e:
            print(f"âŒ åŠ è½½æ•°æ®å¤±è´¥: {e}")

def main():
    """ä¸»èœå•"""
    ems = EmployeeManagementSystem()
    
    while True:
        print("\n" + "=" * 55)
        print("å‘˜å·¥ç®¡ç†ç³»ç»Ÿ")
        print("=" * 55)
        print("1. æ·»åŠ å‘˜å·¥")
        print("2. æŸ¥çœ‹å‘˜å·¥åˆ—è¡¨")
        print("3. è®¡ç®—å…¨ä½“è–ªèµ„")
        print("4. æŠ¥é”€ç”³è¯·")
        print("5. ä¿å­˜æ•°æ®")
        print("6. é€€å‡º")
        print("=" * 55)
        
        choice = input("è¯·é€‰æ‹©åŠŸèƒ½: ").strip()
        
        if choice == "1":
            ems.add_employee()
        elif choice == "2":
            ems.list_employees()
            input("\næŒ‰å›è½¦é”®ç»§ç»­...")
        elif choice == "3":
            ems.calculate_all_salaries()
            input("\næŒ‰å›è½¦é”®ç»§ç»­...")
        elif choice == "4":
            ems.reimbursement_request()
            input("\næŒ‰å›è½¦é”®ç»§ç»­...")
        elif choice == "5":
            ems.save_data()
            input("\næŒ‰å›è½¦é”®ç»§ç»­...")
        elif choice == "6":
            print("ğŸ‘‹ æ„Ÿè°¢ä½¿ç”¨ï¼Œæ•°æ®å·²è‡ªåŠ¨ä¿å­˜ï¼")
            ems.save_data()
            break
        else:
            print("è¯·è¾“å…¥1-6ä¹‹é—´çš„æ•°å­—ï¼")

if __name__ == "__main__":
    main()
```

***

### ä¸ƒã€çŸ¥è¯†ç‚¹åŠ æ²¹ç«™

#### 7.1 OOPä¸‰å¤§ç‰¹æ€§é€ŸæŸ¥

```python
"""
å°è£… (Encapsulation):
- __private_attr ç§æœ‰å±æ€§
- public_method() å…¬å…±æ–¹æ³•
- æ•°æ®ä¿æŠ¤ï¼Œé˜²æ­¢è¯¯ä¿®æ”¹

ç»§æ‰¿ (Inheritance):
- class Child(Parent): å­ç±»ç»§æ‰¿çˆ¶ç±»
- super().__init__() è°ƒç”¨çˆ¶ç±»æ–¹æ³•
- ä»£ç å¤ç”¨ï¼Œé€»è¾‘åˆ†å±‚

å¤šæ€ (Polymorphism):
- åŒåæ–¹æ³•ï¼Œä¸åŒå®ç°
- å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•
- æ¥å£ç»Ÿä¸€ï¼Œè¡Œä¸ºå¤šæ ·
"""
```

***

#### 7.2 isinstance()å’Œtype()çš„åŒºåˆ«

```python
emp = SalesEmployee("å¼ ä¸‰", "E1001", 8000)

type(emp) == SalesEmployee  # Trueï¼Œç²¾ç¡®åŒ¹é…
isinstance(emp, SalesEmployee)  # Trueï¼Œæ˜¯é”€å”®å‘˜å·¥
isinstance(emp, Employee)  # Trueï¼Œä¹Ÿæ˜¯å‘˜å·¥ï¼ˆç»§æ‰¿å…³ç³»ï¼‰
```

***

### å…«ã€æ€»ç»“

- âœ… ç”¨å…¬å¸æ¶æ„ç†è§£ç±»å’Œå¯¹è±¡
- âœ… å°è£…ä¿æŠ¤æ•æ„Ÿè–ªèµ„æ•°æ®
- âœ… ç»§æ‰¿å®ç°ä¸åŒéƒ¨é—¨å‘˜å·¥
- âœ… å¤šæ€å®ç°å·®å¼‚åŒ–æŠ¥é”€æµç¨‹
- âœ… å®Œæ•´çš„å‘˜å·¥ç®¡ç†ç³»ç»Ÿ

***

### ä¸‹ç¯‡é¢„å‘Š

ç¬¬20ç¯‡ã€Šå¼‚å¸¸å¤„ç†ï¼šè®©ç¨‹åºæ›´å¥å£®ã€‹â€”â€”ä»£ç å‡ºé”™ä¸å¯æ€•ï¼Œå­¦ä¼šä¼˜é›…å¤„ç†ï¼Œè®©ç¨‹åºâ€œç™¾æŠ˜ä¸æŒ â€ï¼

***

> ğŸ¤– Powered by Kimi K2 Thinking ğŸ’» å†…å®¹ç»è‘µè‘µğŸŒ»å®¡æ ¸ä¸ä¿®æ”¹

***
