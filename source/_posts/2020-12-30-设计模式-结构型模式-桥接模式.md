---
title: è®¾è®¡æ¨¡å¼-ç»“æ„å‹æ¨¡å¼-æ¡¥æ¥æ¨¡å¼
categories:
  - ğŸŒ™åŸºç¡€å­¦ä¹ 
  - â­è®¾è®¡æ¨¡å¼
abbrlink: ec45913f
date: 2020-12-30 17:01:09
tags:
---

### æ¡¥æ¥æ¨¡å¼ï¼ˆBridgeæ¨¡å¼ï¼‰

åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼ŒæŸäº›ç±»å…·æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªç»´åº¦çš„å˜åŒ–ï¼Œå¦‚å›¾å½¢æ—¢å¯æŒ‰å½¢çŠ¶åˆ†ï¼Œåˆå¯æŒ‰é¢œè‰²åˆ†ã€‚å¦‚ä½•è®¾è®¡ç±»ä¼¼äº Photoshop è¿™æ ·çš„è½¯ä»¶ï¼Œèƒ½ç”»ä¸åŒå½¢çŠ¶å’Œä¸åŒé¢œè‰²çš„å›¾å½¢å‘¢ï¼Ÿå¦‚æœç”¨ç»§æ‰¿æ–¹å¼ï¼Œm ç§å½¢çŠ¶å’Œ n ç§é¢œè‰²çš„å›¾å½¢å°±æœ‰ mÃ—n ç§ï¼Œä¸ä½†å¯¹åº”çš„å­ç±»å¾ˆå¤šï¼Œè€Œä¸”æ‰©å±•å›°éš¾ã€‚

å½“ç„¶ï¼Œè¿™æ ·çš„ä¾‹å­è¿˜æœ‰å¾ˆå¤šï¼Œå¦‚ä¸åŒé¢œè‰²å’Œå­—ä½“çš„æ–‡å­—ã€ä¸åŒå“ç‰Œå’ŒåŠŸç‡çš„æ±½è½¦ã€ä¸åŒæ€§åˆ«å’ŒèŒä¸šçš„ç”·å¥³ã€æ”¯æŒä¸åŒå¹³å°å’Œä¸åŒæ–‡ä»¶æ ¼å¼çš„åª’ä½“æ’­æ”¾å™¨ç­‰ã€‚å¦‚æœç”¨æ¡¥æ¥æ¨¡å¼å°±èƒ½å¾ˆå¥½åœ°è§£å†³è¿™äº›é—®é¢˜ã€‚

***

<!--more-->

### æ¡¥æ¥æ¨¡å¼çš„å®šä¹‰ä¸ç‰¹ç‚¹

**æ¡¥æ¥ï¼ˆBridgeï¼‰æ¨¡å¼çš„å®šä¹‰å¦‚ä¸‹ï¼š**å°†æŠ½è±¡ä¸å®ç°åˆ†ç¦»ï¼Œä½¿å®ƒä»¬å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚å®ƒæ˜¯ç”¨ç»„åˆå…³ç³»ä»£æ›¿ç»§æ‰¿å…³ç³»æ¥å®ç°ï¼Œä»è€Œé™ä½äº†æŠ½è±¡å’Œå®ç°è¿™ä¸¤ä¸ªå¯å˜ç»´åº¦çš„è€¦åˆåº¦ã€‚

é€šè¿‡ä¸Šé¢çš„è®²è§£ï¼Œæˆ‘ä»¬èƒ½å¾ˆå¥½çš„æ„Ÿè§‰åˆ°æ¡¥æ¥æ¨¡å¼éµå¾ªäº†é‡Œæ°æ›¿æ¢åŸåˆ™å’Œä¾èµ–å€’ç½®åŸåˆ™ï¼Œæœ€ç»ˆå®ç°äº†å¼€é—­åŸåˆ™ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ã€‚è¿™é‡Œå°†æ¡¥æ¥æ¨¡å¼çš„ä¼˜ç¼ºç‚¹æ€»ç»“å¦‚ä¸‹ï¼š

æ¡¥æ¥ï¼ˆBridgeï¼‰æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯ï¼š
- æŠ½è±¡ä¸å®ç°åˆ†ç¦»ï¼Œæ‰©å±•èƒ½åŠ›å¼º
- ç¬¦åˆå¼€é—­åŸåˆ™
- ç¬¦åˆåˆæˆå¤ç”¨åŸåˆ™
- å…¶å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜

ç¼ºç‚¹æ˜¯ï¼š
- ç”±äºèšåˆå…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡åŒ–è¿›è¡Œè®¾è®¡ä¸ç¼–ç¨‹ï¼Œèƒ½æ­£ç¡®åœ°è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œè¿™å¢åŠ äº†ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦ã€‚

***

### æ¡¥æ¥æ¨¡å¼çš„ç»“æ„ä¸å®ç°

å¯ä»¥å°†æŠ½è±¡åŒ–éƒ¨åˆ†ä¸å®ç°åŒ–éƒ¨åˆ†åˆ†å¼€ï¼Œå–æ¶ˆäºŒè€…çš„ç»§æ‰¿å…³ç³»ï¼Œæ”¹ç”¨ç»„åˆå…³ç³»ã€‚

#### æ¨¡å¼çš„ç»“æ„

æ¡¥æ¥ï¼ˆBridgeï¼‰æ¨¡å¼åŒ…å«ä»¥ä¸‹ä¸»è¦è§’è‰²ï¼š
1. æŠ½è±¡åŒ–ï¼ˆAbstractionï¼‰è§’è‰²ï¼šå®šä¹‰æŠ½è±¡ç±»ï¼Œå¹¶åŒ…å«ä¸€ä¸ªå¯¹å®ç°åŒ–å¯¹è±¡çš„å¼•ç”¨ã€‚
2. æ‰©å±•æŠ½è±¡åŒ–ï¼ˆRefined Abstractionï¼‰è§’è‰²ï¼šæ˜¯æŠ½è±¡åŒ–è§’è‰²çš„å­ç±»ï¼Œå®ç°çˆ¶ç±»ä¸­çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå¹¶é€šè¿‡ç»„åˆå…³ç³»è°ƒç”¨å®ç°åŒ–è§’è‰²ä¸­çš„ä¸šåŠ¡æ–¹æ³•ã€‚
3. å®ç°åŒ–ï¼ˆImplementorï¼‰è§’è‰²ï¼šå®šä¹‰å®ç°åŒ–è§’è‰²çš„æ¥å£ï¼Œä¾›æ‰©å±•æŠ½è±¡åŒ–è§’è‰²è°ƒç”¨ã€‚
4. å…·ä½“å®ç°åŒ–ï¼ˆConcrete Implementorï¼‰è§’è‰²ï¼šç»™å‡ºå®ç°åŒ–è§’è‰²æ¥å£çš„å…·ä½“å®ç°ã€‚

{% asset_img 1.gif %}

#### æ¨¡å¼çš„å®ç°

æ¡¥æ¥æ¨¡å¼çš„ä»£ç å¦‚ä¸‹ï¼š

``` java
package bridge;
public class BridgeTest {
    public static void main(String[] args) {
        Implementor imple = new ConcreteImplementorA();
        Abstraction abs = new RefinedAbstraction(imple);
        abs.Operation();
    }
}
// å®ç°åŒ–è§’è‰²
interface Implementor {
    public void OperationImpl();
}
// å…·ä½“å®ç°åŒ–è§’è‰²
class ConcreteImplementorA implements Implementor {
    public void OperationImpl() {
        System.out.println("å…·ä½“å®ç°åŒ–(Concrete Implementor)è§’è‰²è¢«è®¿é—®");
    }
}
// æŠ½è±¡åŒ–è§’è‰²
abstract class Abstraction {
    protected Implementor imple;
    protected Abstraction(Implementor imple) {
        this.imple = imple;
    }
    public abstract void Operation();
}
// æ‰©å±•æŠ½è±¡åŒ–è§’è‰²
class RefinedAbstraction extends Abstraction {
    protected RefinedAbstraction(Implementor imple) {
        super(imple);
    }
    public void Operation() {
        System.out.println("æ‰©å±•æŠ½è±¡åŒ–(Refined Abstraction)è§’è‰²è¢«è®¿é—®");
        imple.OperationImpl();
    }
}
```

ç¨‹åºçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š

```
æ‰©å±•æŠ½è±¡åŒ–(Refined Abstraction)è§’è‰²è¢«è®¿é—®
å…·ä½“å®ç°åŒ–(Concrete Implementor)è§’è‰²è¢«è®¿é—®
```

***

### æ¡¥æ¥æ¨¡å¼çš„åº”ç”¨å®ä¾‹

#### ã€ä¾‹1ã€‘ç”¨æ¡¥æ¥ï¼ˆBridgeï¼‰æ¨¡å¼æ¨¡æ‹Ÿå¥³å£«çš®åŒ…çš„é€‰è´­ã€‚

åˆ†æï¼šå¥³å£«çš®åŒ…æœ‰å¾ˆå¤šç§ï¼Œå¯ä»¥æŒ‰ç”¨é€”åˆ†ã€æŒ‰çš®è´¨åˆ†ã€æŒ‰å“ç‰Œåˆ†ã€æŒ‰é¢œè‰²åˆ†ã€æŒ‰å¤§å°åˆ†ç­‰ï¼Œå­˜åœ¨å¤šä¸ªç»´åº¦çš„å˜åŒ–ï¼Œæ‰€ä»¥é‡‡ç”¨æ¡¥æ¥æ¨¡å¼æ¥å®ç°å¥³å£«çš®åŒ…çš„é€‰è´­æ¯”è¾ƒåˆé€‚ã€‚

æœ¬å®ä¾‹æŒ‰ç”¨é€”åˆ†å¯é€‰é’±åŒ…ï¼ˆWalletï¼‰å’ŒæŒåŒ…ï¼ˆHandBagï¼‰ï¼ŒæŒ‰é¢œè‰²åˆ†å¯é€‰é»„è‰²ï¼ˆYellowï¼‰å’Œçº¢è‰²ï¼ˆRedï¼‰ã€‚å¯ä»¥æŒ‰ä¸¤ä¸ªç»´åº¦å®šä¹‰ä¸ºé¢œè‰²ç±»å’ŒåŒ…ç±»ã€‚ï¼ˆç‚¹æ­¤ä¸‹è½½æœ¬å®ä¾‹æ‰€è¦æ˜¾ç¤ºçš„åŒ…çš„å›¾ç‰‡ï¼‰ã€‚

é¢œè‰²ç±»ï¼ˆColorï¼‰æ˜¯ä¸€ä¸ªç»´åº¦ï¼Œå®šä¹‰ä¸ºå®ç°åŒ–è§’è‰²ï¼Œå®ƒæœ‰ä¸¤ä¸ªå…·ä½“å®ç°åŒ–è§’è‰²ï¼šé»„è‰²å’Œçº¢è‰²ï¼Œé€šè¿‡ getColor() æ–¹æ³•å¯ä»¥é€‰æ‹©é¢œè‰²ï¼›åŒ…ç±»ï¼ˆBagï¼‰æ˜¯å¦ä¸€ä¸ªç»´åº¦ï¼Œå®šä¹‰ä¸ºæŠ½è±¡åŒ–è§’è‰²ï¼Œå®ƒæœ‰ä¸¤ä¸ªæ‰©å±•æŠ½è±¡åŒ–è§’è‰²ï¼šæŒåŒ…å’Œé’±åŒ…ï¼Œå®ƒåŒ…å«äº†é¢œè‰²ç±»å¯¹è±¡ï¼Œé€šè¿‡ getName() æ–¹æ³•å¯ä»¥é€‰æ‹©ç›¸å…³é¢œè‰²çš„æŒåŒ…å’Œé’±åŒ…ã€‚

å®¢æˆ·ç±»é€šè¿‡ ReadXML ç±»ä» XML é…ç½®æ–‡ä»¶ä¸­è·å–åŒ…ä¿¡æ¯ï¼Œå¹¶æŠŠé€‰åˆ°çš„äº§å“é€šè¿‡çª—ä½“æ˜¾ç¤ºå‡ºç°ã€‚

{% asset_img 2.gif %}

ç¨‹åºä»£ç å¦‚ä¸‹ï¼š

``` java
package bridge;
import org.w3c.dom.NodeList;
import javax.swing.*;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import java.awt.*;
public class BagManage {
    public static void main(String[] args) {
        Color color;
        Bag bag;
        color = (Color) ReadXML.getObject("color");
        bag = (Bag) ReadXML.getObject("bag");
        bag.setColor(color);
        String name = bag.getName();
        show(name);
    }
    public static void show(String name) {
        JFrame jf = new JFrame("æ¡¥æ¥æ¨¡å¼æµ‹è¯•");
        Container contentPane = jf.getContentPane();
        JPanel p = new JPanel();
        JLabel l = new JLabel(new ImageIcon("src/bridge/" + name + ".jpg"));
        p.setLayout(new GridLayout(1, 1));
        p.setBorder(BorderFactory.createTitledBorder("å¥³å£«çš®åŒ…"));
        p.add(l);
        contentPane.add(p, BorderLayout.CENTER);
        jf.pack();
        jf.setVisible(true);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
}
// å®ç°åŒ–è§’è‰²ï¼šé¢œè‰²
interface Color {
    String getColor();
}
// å…·ä½“å®ç°åŒ–è§’è‰²ï¼šé»„è‰²
class Yellow implements Color {
    public String getColor() {
        return "yellow";
    }
}
// å…·ä½“å®ç°åŒ–è§’è‰²ï¼šçº¢è‰²
class Red implements Color {
    public String getColor() {
        return "red";
    }
}
// æŠ½è±¡åŒ–è§’è‰²ï¼šåŒ…
abstract class Bag {
    protected Color color;
    public void setColor(Color color) {
        this.color = color;
    }
    public abstract String getName();
}
// æ‰©å±•æŠ½è±¡åŒ–è§’è‰²ï¼šæŒåŒ…
class HandBag extends Bag {
    public String getName() {
        return color.getColor() + "HandBag";
    }
}
// æ‰©å±•æŠ½è±¡åŒ–è§’è‰²ï¼šé’±åŒ…
class Wallet extends Bag {
    public String getName() {
        return color.getColor() + "Wallet";
    }
}
```

``` java
package bridge;
import javax.xml.parsers.*;
import org.w3c.dom.*;
import java.io.*;
class ReadXML {
    public static Object getObject(String args) {
        try {
            DocumentBuilderFactory dFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = dFactory.newDocumentBuilder();
            Document doc;
            doc = builder.parse(new File("src/bridge/config.xml"));
            NodeList nl = doc.getElementsByTagName("className");
            Node classNode = null;
            if (args.equals("color")) {
                classNode = nl.item(0).getFirstChild();
            } else if (args.equals("bag")) {
                classNode = nl.item(1).getFirstChild();
            }
            String cName = "bridge." + classNode.getNodeValue();
            Class<?> c = Class.forName(cName);
            Object obj = c.newInstance();
            return obj;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }
}
```

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <className>Yellow</className>
    <className>HandBag</className>
</config>
```

ç¨‹åºçš„è¿è¡Œç»“æœå¦‚å›¾æ‰€ç¤ºï¼š

{% asset_img 3.jpg %}

å¦‚æœå°† XML é…ç½®æ–‡ä»¶æŒ‰å¦‚ä¸‹ä¿®æ”¹ï¼š

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <className>Red</className>
    <className>Wallet</className>
</config>
```

åˆ™ç¨‹åºçš„è¿è¡Œç»“æœå¦‚å›¾æ‰€ç¤ºï¼š

{% asset_img 4.jpg %}

***

### æ¡¥æ¥æ¨¡å¼çš„åº”ç”¨åœºæ™¯

å½“ä¸€ä¸ªç±»å†…éƒ¨å…·å¤‡ä¸¤ç§æˆ–å¤šç§å˜åŒ–ç»´åº¦æ—¶ï¼Œä½¿ç”¨æ¡¥æ¥æ¨¡å¼å¯ä»¥è§£è€¦è¿™äº›å˜åŒ–çš„ç»´åº¦ï¼Œä½¿é«˜å±‚ä»£ç æ¶æ„ç¨³å®šã€‚

æ¡¥æ¥æ¨¡å¼é€šå¸¸é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š
- å½“ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªç»´åº¦éƒ½éœ€è¦è¿›è¡Œæ‰©å±•æ—¶ã€‚
- å½“ä¸€ä¸ªç³»ç»Ÿä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿æˆ–å› ä¸ºå¤šå±‚æ¬¡ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ æ—¶ã€‚
- å½“ä¸€ä¸ªç³»ç»Ÿéœ€è¦åœ¨æ„ä»¶çš„æŠ½è±¡åŒ–è§’è‰²å’Œå…·ä½“åŒ–è§’è‰²ä¹‹é—´å¢åŠ æ›´å¤šçš„çµæ´»æ€§æ—¶ã€‚

æ¡¥æ¥æ¨¡å¼çš„ä¸€ä¸ªå¸¸è§ä½¿ç”¨åœºæ™¯å°±æ˜¯æ›¿æ¢ç»§æ‰¿ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œç»§æ‰¿æ‹¥æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ¯”å¦‚ï¼ŒæŠ½è±¡ã€å°è£…ã€å¤šæ€ç­‰ï¼Œçˆ¶ç±»å°è£…å…±æ€§ï¼Œå­ç±»å®ç°ç‰¹æ€§ã€‚ç»§æ‰¿å¯ä»¥å¾ˆå¥½çš„å®ç°ä»£ç å¤ç”¨ï¼ˆå°è£…ï¼‰çš„åŠŸèƒ½ï¼Œä½†è¿™ä¹Ÿæ˜¯ç»§æ‰¿çš„ä¸€å¤§ç¼ºç‚¹ã€‚

å› ä¸ºçˆ¶ç±»æ‹¥æœ‰çš„æ–¹æ³•ï¼Œå­ç±»ä¹Ÿä¼šç»§æ‰¿å¾—åˆ°ï¼Œæ— è®ºå­ç±»éœ€ä¸éœ€è¦ï¼Œè¿™è¯´æ˜ç»§æ‰¿å…·å¤‡å¼ºä¾µå…¥æ€§ï¼ˆçˆ¶ç±»ä»£ç ä¾µå…¥å­ç±»ï¼‰ï¼ŒåŒæ—¶ä¼šå¯¼è‡´å­ç±»è‡ƒè‚¿ã€‚å› æ­¤ï¼Œåœ¨è®¾è®¡æ¨¡å¼ä¸­ï¼Œæœ‰ä¸€ä¸ªåŸåˆ™ä¸ºä¼˜å…ˆä½¿ç”¨ç»„åˆ/èšåˆï¼Œè€Œä¸æ˜¯ç»§æ‰¿ã€‚

{% asset_img 5.png %}

å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åˆ†ä¸æ¸…è¯¥ä½¿ç”¨ç»§æ‰¿è¿˜æ˜¯ç»„åˆ/èšåˆæˆ–å…¶ä»–æ–¹å¼ç­‰ï¼Œå…¶å®å¯ä»¥ä»ç°å®è¯­ä¹‰è¿›è¡Œæ€è€ƒã€‚å› ä¸ºè½¯ä»¶æœ€ç»ˆè¿˜æ˜¯æä¾›ç»™ç°å®ç”Ÿæ´»ä¸­çš„äººä½¿ç”¨çš„ï¼Œæ˜¯æœåŠ¡äºäººç±»ç¤¾ä¼šçš„ï¼Œè½¯ä»¶æ˜¯å…·å¤‡ç°å®åœºæ™¯çš„ã€‚å½“æˆ‘ä»¬ä»çº¯ä»£ç è§’åº¦æ— æ³•çœ‹æ¸…é—®é¢˜æ—¶ï¼Œç°å®è§’åº¦å¯èƒ½ä¼šæä¾›æ›´åŠ å¼€é˜”çš„æ€è·¯ã€‚

***

### æ¡¥æ¥æ¨¡å¼æ¨¡å¼çš„æ‰©å±•

åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæœ‰æ—¶æ¡¥æ¥ï¼ˆBridgeï¼‰æ¨¡å¼å¯ä¸é€‚é…å™¨æ¨¡å¼è”åˆä½¿ç”¨ã€‚å½“æ¡¥æ¥ï¼ˆBridgeï¼‰æ¨¡å¼çš„å®ç°åŒ–è§’è‰²çš„æ¥å£ä¸ç°æœ‰ç±»çš„æ¥å£ä¸ä¸€è‡´æ—¶ï¼Œå¯ä»¥åœ¨äºŒè€…ä¸­é—´å®šä¹‰ä¸€ä¸ªé€‚é…å™¨å°†äºŒè€…è¿æ¥èµ·æ¥ï¼Œå…¶å…·ä½“ç»“æ„å›¾å¦‚å›¾æ‰€ç¤ºã€‚

{% asset_img 6.gif %}

***

### å‚è€ƒèµ„æ–™

> <http://c.biancheng.net/view/1364.html>
