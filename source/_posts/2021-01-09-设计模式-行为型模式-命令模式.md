---
title: è®¾è®¡æ¨¡å¼-è¡Œä¸ºå‹æ¨¡å¼-å‘½ä»¤æ¨¡å¼
categories:
  - ğŸŒ™å¤§å­¦è¯¾ç¨‹
abbrlink: 9dfddb1f
date: 2021-01-09 20:05:56
tags:
---

### å‘½ä»¤æ¨¡å¼

åœ¨è½¯ä»¶å¼€å‘ç³»ç»Ÿä¸­ï¼Œâ€œæ–¹æ³•çš„è¯·æ±‚è€…â€ä¸â€œæ–¹æ³•çš„å®ç°è€…â€ä¹‹é—´ç»å¸¸å­˜åœ¨ç´§å¯†çš„è€¦åˆå…³ç³»ï¼Œè¿™ä¸åˆ©äºè½¯ä»¶åŠŸèƒ½çš„æ‰©å±•ä¸ç»´æŠ¤ã€‚ä¾‹å¦‚ï¼Œæƒ³å¯¹æ–¹æ³•è¿›è¡Œâ€œæ’¤é”€ã€é‡åšã€è®°å½•â€ç­‰å¤„ç†éƒ½å¾ˆä¸æ–¹ä¾¿ï¼Œå› æ­¤â€œå¦‚ä½•å°†æ–¹æ³•çš„è¯·æ±‚è€…ä¸å®ç°è€…è§£è€¦ï¼Ÿâ€å˜å¾—å¾ˆé‡è¦ï¼Œå‘½ä»¤æ¨¡å¼å°±èƒ½å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œå‘½ä»¤æ¨¡å¼çš„ä¾‹å­ä¹Ÿå¾ˆå¤šã€‚æ¯”å¦‚çœ‹ç”µè§†æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è½»è½»ä¸€æŒ‰é¥æ§å™¨å°±èƒ½å®Œæˆé¢‘é“çš„åˆ‡æ¢ï¼Œè¿™å°±æ˜¯å‘½ä»¤æ¨¡å¼ï¼Œå°†æ¢å°è¯·æ±‚å’Œæ¢å°å¤„ç†å®Œå…¨è§£è€¦äº†ã€‚ç”µè§†æœºé¥æ§å™¨ï¼ˆå‘½ä»¤å‘é€è€…ï¼‰é€šè¿‡æŒ‰é’®ï¼ˆå…·ä½“å‘½ä»¤ï¼‰æ¥é¥æ§ç”µè§†æœºï¼ˆå‘½ä»¤æ¥æ”¶è€…ï¼‰ã€‚

å†æ¯”å¦‚ï¼Œæˆ‘ä»¬å»é¤å…åƒé¥­ï¼Œèœå•ä¸æ˜¯ç­‰åˆ°å®¢äººæ¥äº†ä¹‹åæ‰å®šåˆ¶çš„ï¼Œè€Œæ˜¯å·²ç»é¢„å…ˆé…ç½®å¥½çš„ã€‚è¿™æ ·ï¼Œå®¢äººæ¥äº†å°±åªéœ€è¦ç‚¹èœï¼Œè€Œä¸æ˜¯ä»»ç”±å®¢äººä¸´æ—¶å®šåˆ¶ã€‚é¤å…æä¾›çš„èœå•å°±ç›¸å½“äºæŠŠè¯·æ±‚å’Œå¤„ç†è¿›è¡Œäº†è§£è€¦ï¼Œè¿™å°±æ˜¯å‘½ä»¤æ¨¡å¼çš„ä½“ç°ã€‚

***

<!--more-->

### å‘½ä»¤æ¨¡å¼çš„å®šä¹‰ä¸ç‰¹ç‚¹

**å‘½ä»¤ï¼ˆCommandï¼‰æ¨¡å¼çš„å®šä¹‰å¦‚ä¸‹ï¼š**å°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å‘å‡ºè¯·æ±‚çš„è´£ä»»å’Œæ‰§è¡Œè¯·æ±‚çš„è´£ä»»åˆ†å‰²å¼€ã€‚è¿™æ ·ä¸¤è€…ä¹‹é—´é€šè¿‡å‘½ä»¤å¯¹è±¡è¿›è¡Œæ²Ÿé€šï¼Œè¿™æ ·æ–¹ä¾¿å°†å‘½ä»¤å¯¹è±¡è¿›è¡Œå‚¨å­˜ã€ä¼ é€’ã€è°ƒç”¨ã€å¢åŠ ä¸ç®¡ç†ã€‚

å‘½ä»¤æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š
1. é€šè¿‡å¼•å…¥ä¸­é—´ä»¶ï¼ˆæŠ½è±¡æ¥å£ï¼‰é™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ã€‚
2. æ‰©å±•æ€§è‰¯å¥½ï¼Œå¢åŠ æˆ–åˆ é™¤å‘½ä»¤éå¸¸æ–¹ä¾¿ã€‚é‡‡ç”¨å‘½ä»¤æ¨¡å¼å¢åŠ ä¸åˆ é™¤å‘½ä»¤ä¸ä¼šå½±å“å…¶ä»–ç±»ï¼Œä¸”æ»¡è¶³â€œå¼€é—­åŸåˆ™â€ã€‚
3. å¯ä»¥å®ç°å®å‘½ä»¤ã€‚å‘½ä»¤æ¨¡å¼å¯ä»¥ä¸ç»„åˆæ¨¡å¼ç»“åˆï¼Œå°†å¤šä¸ªå‘½ä»¤è£…é…æˆä¸€ä¸ªç»„åˆå‘½ä»¤ï¼Œå³å®å‘½ä»¤ã€‚
4. æ–¹ä¾¿å®ç° Undo å’Œ Redo æ“ä½œã€‚å‘½ä»¤æ¨¡å¼å¯ä»¥ä¸åé¢ä»‹ç»çš„å¤‡å¿˜å½•æ¨¡å¼ç»“åˆï¼Œå®ç°å‘½ä»¤çš„æ’¤é”€ä¸æ¢å¤ã€‚
5. å¯ä»¥åœ¨ç°æœ‰å‘½ä»¤çš„åŸºç¡€ä¸Šï¼Œå¢åŠ é¢å¤–åŠŸèƒ½ã€‚æ¯”å¦‚æ—¥å¿—è®°å½•ï¼Œç»“åˆè£…é¥°å™¨æ¨¡å¼ä¼šæ›´åŠ çµæ´»ã€‚

å…¶ç¼ºç‚¹æ˜¯ï¼š
1. å¯èƒ½äº§ç”Ÿå¤§é‡å…·ä½“çš„å‘½ä»¤ç±»ã€‚å› ä¸ºæ¯ä¸€ä¸ªå…·ä½“æ“ä½œéƒ½éœ€è¦è®¾è®¡ä¸€ä¸ªå…·ä½“å‘½ä»¤ç±»ï¼Œè¿™ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚
2. å‘½ä»¤æ¨¡å¼çš„ç»“æœå…¶å®å°±æ˜¯æ¥æ”¶æ–¹çš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ä¸ºäº†ä»¥å‘½ä»¤çš„å½¢å¼è¿›è¡Œæ¶æ„ã€è§£è€¦è¯·æ±‚ä¸å®ç°ï¼Œå¼•å…¥äº†é¢å¤–ç±»å‹ç»“æ„ï¼ˆå¼•å…¥äº†è¯·æ±‚æ–¹ä¸æŠ½è±¡å‘½ä»¤æ¥å£ï¼‰ï¼Œå¢åŠ äº†ç†è§£ä¸Šçš„å›°éš¾ã€‚ä¸è¿‡è¿™ä¹Ÿæ˜¯è®¾è®¡æ¨¡å¼çš„é€šç—…ï¼ŒæŠ½è±¡å¿…ç„¶ä¼šé¢å¤–å¢åŠ ç±»çš„æ•°é‡ï¼Œä»£ç æŠ½ç¦»è‚¯å®šæ¯”ä»£ç èšåˆæ›´åŠ éš¾ç†è§£ã€‚

***

### å‘½ä»¤æ¨¡å¼çš„ç»“æ„ä¸å®ç°

å¯ä»¥å°†ç³»ç»Ÿä¸­çš„ç›¸å…³æ“ä½œæŠ½è±¡æˆå‘½ä»¤ï¼Œä½¿è°ƒç”¨è€…ä¸å®ç°è€…ç›¸å…³åˆ†ç¦»ï¼Œå…¶ç»“æ„å¦‚ä¸‹ã€‚

#### æ¨¡å¼çš„ç»“æ„

å‘½ä»¤æ¨¡å¼åŒ…å«ä»¥ä¸‹ä¸»è¦è§’è‰²ï¼š
1. æŠ½è±¡å‘½ä»¤ç±»ï¼ˆCommandï¼‰è§’è‰²ï¼šå£°æ˜æ‰§è¡Œå‘½ä»¤çš„æ¥å£ï¼Œæ‹¥æœ‰æ‰§è¡Œå‘½ä»¤çš„æŠ½è±¡æ–¹æ³• execute()ã€‚
2. å…·ä½“å‘½ä»¤ç±»ï¼ˆConcrete Commandï¼‰è§’è‰²ï¼šæ˜¯æŠ½è±¡å‘½ä»¤ç±»çš„å…·ä½“å®ç°ç±»ï¼Œå®ƒæ‹¥æœ‰æ¥æ”¶è€…å¯¹è±¡ï¼Œå¹¶é€šè¿‡è°ƒç”¨æ¥æ”¶è€…çš„åŠŸèƒ½æ¥å®Œæˆå‘½ä»¤è¦æ‰§è¡Œçš„æ“ä½œã€‚
3. å®ç°è€…/æ¥æ”¶è€…ï¼ˆReceiverï¼‰è§’è‰²ï¼šæ‰§è¡Œå‘½ä»¤åŠŸèƒ½çš„ç›¸å…³æ“ä½œï¼Œæ˜¯å…·ä½“å‘½ä»¤å¯¹è±¡ä¸šåŠ¡çš„çœŸæ­£å®ç°è€…ã€‚
4. è°ƒç”¨è€…/è¯·æ±‚è€…ï¼ˆInvokerï¼‰è§’è‰²ï¼šæ˜¯è¯·æ±‚çš„å‘é€è€…ï¼Œå®ƒé€šå¸¸æ‹¥æœ‰å¾ˆå¤šçš„å‘½ä»¤å¯¹è±¡ï¼Œå¹¶é€šè¿‡è®¿é—®å‘½ä»¤å¯¹è±¡æ¥æ‰§è¡Œç›¸å…³è¯·æ±‚ï¼Œå®ƒä¸ç›´æ¥è®¿é—®æ¥æ”¶è€…ã€‚

{% asset_img 1.gif %}

#### æ¨¡å¼çš„å®ç°

å‘½ä»¤æ¨¡å¼çš„ä»£ç å¦‚ä¸‹ï¼š

``` java
package command;
public class CommandPattern {
    public static void main(String[] args) {
        Command cmd = new ConcreteCommand();
        Invoker ir = new Invoker(cmd);
        System.out.println("å®¢æˆ·è®¿é—®è°ƒç”¨è€…çš„call()æ–¹æ³•...");
        ir.call();
    }
}
// è°ƒç”¨è€…
class Invoker {
    private Command command;
    public Invoker(Command command) {
        this.command = command;
    }
    public void setCommand(Command command) {
        this.command = command;
    }
    public void call() {
        System.out.println("è°ƒç”¨è€…æ‰§è¡Œå‘½ä»¤command...");
        command.execute();
    }
}
// æŠ½è±¡å‘½ä»¤
interface Command {
    public abstract void execute();
}
// å…·ä½“å‘½ä»¤
class ConcreteCommand implements Command {
    private Receiver receiver;
    ConcreteCommand() {
        receiver = new Receiver();
    }
    public void execute() {
        receiver.action();
    }
}
// æ¥æ”¶è€…
class Receiver {
    public void action() {
        System.out.println("æ¥æ”¶è€…çš„action()æ–¹æ³•è¢«è°ƒç”¨...");
    }
}
```

ç¨‹åºçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š

```
å®¢æˆ·è®¿é—®è°ƒç”¨è€…çš„call()æ–¹æ³•...
è°ƒç”¨è€…æ‰§è¡Œå‘½ä»¤command...
æ¥æ”¶è€…çš„action()æ–¹æ³•è¢«è°ƒç”¨...
```

***

### å‘½ä»¤æ¨¡å¼çš„åº”ç”¨å®ä¾‹

#### ã€ä¾‹1ã€‘ç”¨å‘½ä»¤æ¨¡å¼å®ç°å®¢æˆ·å»é¤é¦†åƒæ—©é¤çš„å®ä¾‹

åˆ†æï¼šå®¢æˆ·å»é¤é¦†å¯é€‰æ‹©çš„æ—©é¤æœ‰è‚ ç²‰ã€æ²³ç²‰å’Œé¦„é¥¨ç­‰ï¼Œå®¢æˆ·å¯å‘æœåŠ¡å‘˜é€‰æ‹©ä»¥ä¸Šæ—©é¤ä¸­çš„è‹¥å¹²ç§ï¼ŒæœåŠ¡å‘˜å°†å®¢æˆ·çš„è¯·æ±‚äº¤ç»™ç›¸å…³çš„å¨å¸ˆå»åšã€‚è¿™é‡Œçš„ç‚¹æ—©é¤ç›¸å½“äºâ€œå‘½ä»¤â€ï¼ŒæœåŠ¡å‘˜ç›¸å½“äºâ€œè°ƒç”¨è€…â€ï¼Œå¨å¸ˆç›¸å½“äºâ€œæ¥æ”¶è€…â€ï¼Œæ‰€ä»¥ç”¨å‘½ä»¤æ¨¡å¼å®ç°æ¯”è¾ƒåˆé€‚ã€‚
- é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªæ—©é¤ç±»ï¼ˆBreakfastï¼‰ï¼Œå®ƒæ˜¯æŠ½è±¡å‘½ä»¤ç±»ï¼Œæœ‰æŠ½è±¡æ–¹æ³• cooking()ï¼Œè¯´æ˜è¦åšä»€ä¹ˆï¼›
- å†å®šä¹‰å…¶å­ç±»è‚ ç²‰ç±»ï¼ˆChangFenï¼‰ã€é¦„é¥¨ç±»ï¼ˆHunTunï¼‰å’Œæ²³ç²‰ç±»ï¼ˆHeFenï¼‰ï¼Œå®ƒä»¬æ˜¯å…·ä½“å‘½ä»¤ç±»ï¼Œå®ç°æ—©é¤ç±»çš„ cooking() æ–¹æ³•ï¼Œä½†å®ƒä»¬ä¸ä¼šå…·ä½“åšï¼Œè€Œæ˜¯äº¤ç»™å…·ä½“çš„å¨å¸ˆå»åšï¼›
- å…·ä½“å¨å¸ˆç±»æœ‰è‚ ç²‰å¨å¸ˆï¼ˆChangFenChefï¼‰ã€é¦„é¥¨å¨å¸ˆï¼ˆHunTunChefï¼‰å’Œæ²³ç²‰å¨å¸ˆï¼ˆHeFenChefï¼‰ï¼Œä»–ä»¬æ˜¯å‘½ä»¤çš„æ¥æ”¶è€…ã€‚

ç”±äºæœ¬å®ä¾‹è¦æ˜¾ç¤ºå¨å¸ˆåšèœçš„æ•ˆæœå›¾ï¼Œæ‰€ä»¥æŠŠæ¯ä¸ªå¨å¸ˆç±»å®šä¹‰ä¸º JFrame çš„å­ç±»ï¼›æœ€åï¼Œå®šä¹‰æœåŠ¡å‘˜ç±»ï¼ˆWaiterï¼‰ï¼Œå®ƒæ¥æ”¶å®¢æˆ·çš„åšèœè¯·æ±‚ï¼Œå¹¶å‘å‡ºåšèœçš„å‘½ä»¤ã€‚å®¢æˆ·ç±»æ˜¯é€šè¿‡æœåŠ¡å‘˜ç±»æ¥ç‚¹èœçš„ã€‚

{% asset_img 2.gif %}

ç¨‹åºä»£ç å¦‚ä¸‹ï¼š

``` java
package command;
import javax.swing.*;
public class CookingCommand {
    public static void main(String[] args) {
        Breakfast food1 = new ChangFen();
        Breakfast food2 = new HunTun();
        Breakfast food3 = new HeFen();
        Waiter fwy = new Waiter();
        fwy.setChangFen(food1);//è®¾ç½®è‚ ç²‰èœå•
        fwy.setHunTun(food2);  //è®¾ç½®æ²³ç²‰èœå•
        fwy.setHeFen(food3);   //è®¾ç½®é¦„é¥¨èœå•
        fwy.chooseChangFen();  //é€‰æ‹©è‚ ç²‰
        fwy.chooseHeFen();     //é€‰æ‹©æ²³ç²‰
        fwy.chooseHunTun();    //é€‰æ‹©é¦„é¥¨
    }
}
// è°ƒç”¨è€…ï¼šæœåŠ¡å‘˜
class Waiter {
    private Breakfast changFen, hunTun, heFen;
    public void setChangFen(Breakfast f) {
        changFen = f;
    }
    public void setHunTun(Breakfast f) {
        hunTun = f;
    }
    public void setHeFen(Breakfast f) {
        heFen = f;
    }
    public void chooseChangFen() {
        changFen.cooking();
    }
    public void chooseHunTun() {
        hunTun.cooking();
    }
    public void chooseHeFen() {
        heFen.cooking();
    }
}
// æŠ½è±¡å‘½ä»¤ï¼šæ—©é¤
interface Breakfast {
    public abstract void cooking();
}
// å…·ä½“å‘½ä»¤ï¼šè‚ ç²‰
class ChangFen implements Breakfast {
    private ChangFenChef receiver;
    ChangFen() {
        receiver = new ChangFenChef();
    }
    public void cooking() {
        receiver.cooking();
    }
}
// å…·ä½“å‘½ä»¤ï¼šé¦„é¥¨
class HunTun implements Breakfast {
    private HunTunChef receiver;
    HunTun() {
        receiver = new HunTunChef();
    }
    public void cooking() {
        receiver.cooking();
    }
}
// å…·ä½“å‘½ä»¤ï¼šæ²³ç²‰
class HeFen implements Breakfast {
    private HeFenChef receiver;
    HeFen() {
        receiver = new HeFenChef();
    }
    public void cooking() {
        receiver.cooking();
    }
}
// æ¥æ”¶è€…ï¼šè‚ ç²‰å¨å¸ˆ
class ChangFenChef extends JFrame {
    private static final long serialVersionUID = 1L;
    JLabel l = new JLabel();
    ChangFenChef() {
        super("ç…®è‚ ç²‰");
        l.setIcon(new ImageIcon("src/command/ChangFen.jpg"));
        this.add(l);
        this.setLocation(30, 30);
        this.pack();
        this.setResizable(false);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
    public void cooking() {
        this.setVisible(true);
    }
}
// æ¥æ”¶è€…ï¼šé¦„é¥¨å¨å¸ˆ
class HunTunChef extends JFrame {
    private static final long serialVersionUID = 1L;
    JLabel l = new JLabel();
    HunTunChef() {
        super("ç…®é¦„é¥¨");
        l.setIcon(new ImageIcon("src/command/HunTun.jpg"));
        this.add(l);
        this.setLocation(350, 50);
        this.pack();
        this.setResizable(false);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
    public void cooking() {
        this.setVisible(true);
    }
}
// æ¥æ”¶è€…ï¼šæ²³ç²‰å¨å¸ˆ
class HeFenChef extends JFrame {
    private static final long serialVersionUID = 1L;
    JLabel l = new JLabel();
    HeFenChef() {
        super("ç…®æ²³ç²‰");
        l.setIcon(new ImageIcon("src/command/HeFen.jpg"));
        this.add(l);
        this.setLocation(200, 280);
        this.pack();
        this.setResizable(false);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
    public void cooking() {
        this.setVisible(true);
    }
}
```

ç¨‹åºçš„è¿è¡Œç»“æœå¦‚å›¾æ‰€ç¤ºï¼š

{% asset_img 3.jpg %}

***

### å‘½ä»¤æ¨¡å¼çš„åº”ç”¨åœºæ™¯

å½“ç³»ç»Ÿçš„æŸé¡¹æ“ä½œå…·å¤‡å‘½ä»¤è¯­ä¹‰ï¼Œä¸”å‘½ä»¤å®ç°ä¸ç¨³å®šï¼ˆå˜åŒ–ï¼‰æ—¶ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤æ¨¡å¼è§£è€¦è¯·æ±‚ä¸å®ç°ã€‚ä½¿ç”¨æŠ½è±¡å‘½ä»¤æ¥å£ä½¿è¯·æ±‚æ–¹çš„ä»£ç æ¶æ„ç¨³å®šï¼Œå°è£…æ¥æ”¶æ–¹å…·ä½“å‘½ä»¤çš„å®ç°ç»†èŠ‚ã€‚æ¥æ”¶æ–¹ä¸æŠ½è±¡å‘½ä»¤å‘ˆç°å¼±è€¦åˆï¼ˆå†…éƒ¨æ–¹æ³•æ— éœ€ä¸€è‡´ï¼‰ï¼Œå…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ã€‚

å‘½ä»¤æ¨¡å¼é€šå¸¸é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š
1. è¯·æ±‚è°ƒç”¨è€…éœ€è¦ä¸è¯·æ±‚æ¥æ”¶è€…è§£è€¦æ—¶ï¼Œå‘½ä»¤æ¨¡å¼å¯ä»¥ä½¿è°ƒç”¨è€…å’Œæ¥æ”¶è€…ä¸ç›´æ¥äº¤äº’ã€‚
2. ç³»ç»Ÿéšæœºè¯·æ±‚å‘½ä»¤æˆ–ç»å¸¸å¢åŠ ã€åˆ é™¤å‘½ä»¤æ—¶ï¼Œå‘½ä»¤æ¨¡å¼å¯ä»¥æ–¹ä¾¿åœ°å®ç°è¿™äº›åŠŸèƒ½ã€‚
3. å½“ç³»ç»Ÿéœ€è¦æ‰§è¡Œä¸€ç»„æ“ä½œæ—¶ï¼Œå‘½ä»¤æ¨¡å¼å¯ä»¥å®šä¹‰å®å‘½ä»¤æ¥å®ç°è¯¥åŠŸèƒ½ã€‚
4. å½“ç³»ç»Ÿéœ€è¦æ”¯æŒå‘½ä»¤çš„æ’¤é”€ï¼ˆUndoï¼‰æ“ä½œå’Œæ¢å¤ï¼ˆRedoï¼‰æ“ä½œæ—¶ï¼Œå¯ä»¥å°†å‘½ä»¤å¯¹è±¡å­˜å‚¨èµ·æ¥ï¼Œé‡‡ç”¨å¤‡å¿˜å½•æ¨¡å¼æ¥å®ç°ã€‚

***

### å‘½ä»¤æ¨¡å¼çš„æ‰©å±•

åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæœ‰æ—¶å°†å‘½ä»¤æ¨¡å¼ä¸å‰é¢å­¦çš„ç»„åˆæ¨¡å¼è”åˆä½¿ç”¨ï¼Œè¿™å°±æ„æˆäº†å®å‘½ä»¤æ¨¡å¼ï¼Œä¹Ÿå«ç»„åˆå‘½ä»¤æ¨¡å¼ã€‚å®å‘½ä»¤åŒ…å«äº†ä¸€ç»„å‘½ä»¤ï¼Œå®ƒå……å½“äº†å…·ä½“å‘½ä»¤ä¸è°ƒç”¨è€…çš„åŒé‡è§’è‰²ï¼Œæ‰§è¡Œå®ƒæ—¶å°†é€’å½’è°ƒç”¨å®ƒæ‰€åŒ…å«çš„æ‰€æœ‰å‘½ä»¤ï¼Œå…¶å…·ä½“ç»“æ„å›¾å¦‚å›¾æ‰€ç¤ºã€‚

{% asset_img 4.gif %}

ç¨‹åºä»£ç å¦‚ä¸‹ï¼š

``` java
package command;
import java.util.ArrayList;
public class CompositeCommandPattern {
    public static void main(String[] args) {
        AbstractCommand cmd1 = new ConcreteCommand1();
        AbstractCommand cmd2 = new ConcreteCommand2();
        CompositeInvoker ir = new CompositeInvoker();
        ir.add(cmd1);
        ir.add(cmd2);
        System.out.println("å®¢æˆ·è®¿é—®è°ƒç”¨è€…çš„execute()æ–¹æ³•...");
        ir.execute();
    }
}
// æŠ½è±¡å‘½ä»¤
interface AbstractCommand {
    public abstract void execute();
}
// æ ‘å¶æ„ä»¶: å…·ä½“å‘½ä»¤1
class ConcreteCommand1 implements AbstractCommand {
    private CompositeReceiver receiver;
    ConcreteCommand1() {
        receiver = new CompositeReceiver();
    }
    public void execute() {
        receiver.action1();
    }
}
// æ ‘å¶æ„ä»¶: å…·ä½“å‘½ä»¤2
class ConcreteCommand2 implements AbstractCommand {
    private CompositeReceiver receiver;
    ConcreteCommand2() {
        receiver = new CompositeReceiver();
    }
    public void execute() {
        receiver.action2();
    }
}
// æ ‘ææ„ä»¶: è°ƒç”¨è€…
class CompositeInvoker implements AbstractCommand {
    private ArrayList<AbstractCommand> children = new ArrayList<AbstractCommand>();
    public void add(AbstractCommand c) {
        children.add(c);
    }
    public void remove(AbstractCommand c) {
        children.remove(c);
    }
    public AbstractCommand getChild(int i) {
        return children.get(i);
    }
    public void execute() {
        for (Object obj : children) {
            ((AbstractCommand) obj).execute();
        }
    }
}
// æ¥æ”¶è€…
class CompositeReceiver {
    public void action1() {
        System.out.println("æ¥æ”¶è€…çš„action1()æ–¹æ³•è¢«è°ƒç”¨...");
    }
    public void action2() {
        System.out.println("æ¥æ”¶è€…çš„action2()æ–¹æ³•è¢«è°ƒç”¨...");
    }
}
```

ç¨‹åºçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š

```
å®¢æˆ·è®¿é—®è°ƒç”¨è€…çš„execute()æ–¹æ³•...
æ¥æ”¶è€…çš„action1()æ–¹æ³•è¢«è°ƒç”¨...
æ¥æ”¶è€…çš„action2()æ–¹æ³•è¢«è°ƒç”¨...
```

å½“ç„¶ï¼Œå‘½ä»¤æ¨¡å¼è¿˜å¯ä»¥åŒå¤‡å¿˜å½•ï¼ˆMementoï¼‰æ¨¡å¼ç»„åˆä½¿ç”¨ï¼Œè¿™æ ·å°±å˜æˆäº†å¯æ’¤é”€çš„å‘½ä»¤æ¨¡å¼ï¼Œè¿™å°†åœ¨åé¢ä»‹ç»ã€‚

***

### å‚è€ƒèµ„æ–™

> <http://c.biancheng.net/view/1380.html>
