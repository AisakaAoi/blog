---
title: è®¾è®¡æ¨¡å¼-åˆ›å»ºå‹æ¨¡å¼-å»ºé€ è€…æ¨¡å¼
categories:
  - ğŸŒ™åŸºç¡€å­¦ä¹ 
  - â­è®¾è®¡æ¨¡å¼
abbrlink: c636f347
date: 2020-12-26 16:59:59
tags:
---

### å»ºé€ è€…æ¨¡å¼ï¼ˆBulideræ¨¡å¼ï¼‰

åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­æœ‰æ—¶éœ€è¦åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¤æ‚å¯¹è±¡é€šå¸¸ç”±å¤šä¸ªå­éƒ¨ä»¶æŒ‰ä¸€å®šçš„æ­¥éª¤ç»„åˆè€Œæˆã€‚ä¾‹å¦‚ï¼Œè®¡ç®—æœºæ˜¯ç”± CPUã€ä¸»æ¿ã€å†…å­˜ã€ç¡¬ç›˜ã€æ˜¾å¡ã€æœºç®±ã€æ˜¾ç¤ºå™¨ã€é”®ç›˜ã€é¼ æ ‡ç­‰éƒ¨ä»¶ç»„è£…è€Œæˆçš„ï¼Œé‡‡è´­å‘˜ä¸å¯èƒ½è‡ªå·±å»ç»„è£…è®¡ç®—æœºï¼Œè€Œæ˜¯å°†è®¡ç®—æœºçš„é…ç½®è¦æ±‚å‘Šè¯‰è®¡ç®—æœºé”€å”®å…¬å¸ï¼Œè®¡ç®—æœºé”€å”®å…¬å¸å®‰æ’æŠ€æœ¯äººå‘˜å»ç»„è£…è®¡ç®—æœºï¼Œç„¶åå†äº¤ç»™è¦ä¹°è®¡ç®—æœºçš„é‡‡è´­å‘˜ã€‚

ç”Ÿæ´»ä¸­è¿™æ ·çš„ä¾‹å­å¾ˆå¤šï¼Œå¦‚æ¸¸æˆä¸­çš„ä¸åŒè§’è‰²ï¼Œå…¶æ€§åˆ«ã€ä¸ªæ€§ã€èƒ½åŠ›ã€è„¸å‹ã€ä½“å‹ã€æœè£…ã€å‘å‹ç­‰ç‰¹æ€§éƒ½æœ‰æ‰€å·®å¼‚ï¼›è¿˜æœ‰æ±½è½¦ä¸­çš„æ–¹å‘ç›˜ã€å‘åŠ¨æœºã€è½¦æ¶ã€è½®èƒç­‰éƒ¨ä»¶ä¹Ÿå¤šç§å¤šæ ·ï¼›æ¯å°ç”µå­é‚®ä»¶çš„å‘ä»¶äººã€æ”¶ä»¶äººã€ä¸»é¢˜ã€å†…å®¹ã€é™„ä»¶ç­‰å†…å®¹ä¹Ÿå„ä¸ç›¸åŒã€‚

ä»¥ä¸Šæ‰€æœ‰è¿™äº›äº§å“éƒ½æ˜¯ç”±å¤šä¸ªéƒ¨ä»¶æ„æˆçš„ï¼Œå„ä¸ªéƒ¨ä»¶å¯ä»¥çµæ´»é€‰æ‹©ï¼Œä½†å…¶åˆ›å»ºæ­¥éª¤éƒ½å¤§åŒå°å¼‚ã€‚è¿™ç±»äº§å“çš„åˆ›å»ºæ— æ³•ç”¨å‰é¢ä»‹ç»çš„å·¥å‚æ¨¡å¼æè¿°ï¼Œåªæœ‰å»ºé€ è€…æ¨¡å¼å¯ä»¥å¾ˆå¥½åœ°æè¿°è¯¥ç±»äº§å“çš„åˆ›å»ºã€‚

***

<!--more-->

### å»ºé€ è€…æ¨¡å¼çš„å®šä¹‰ä¸ç‰¹ç‚¹

**å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼çš„å®šä¹‰ï¼š**æŒ‡å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„é€ ä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºï¼Œè¿™æ ·çš„è®¾è®¡æ¨¡å¼è¢«ç§°ä¸ºå»ºé€ è€…æ¨¡å¼ã€‚å®ƒæ˜¯å°†ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡åˆ†è§£ä¸ºå¤šä¸ªç®€å•çš„å¯¹è±¡ï¼Œç„¶åä¸€æ­¥ä¸€æ­¥æ„å»ºè€Œæˆã€‚å®ƒå°†å˜ä¸ä¸å˜ç›¸åˆ†ç¦»ï¼Œå³äº§å“çš„ç»„æˆéƒ¨åˆ†æ˜¯ä¸å˜çš„ï¼Œä½†æ¯ä¸€éƒ¨åˆ†æ˜¯å¯ä»¥çµæ´»é€‰æ‹©çš„ã€‚

è¯¥æ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š
- å°è£…æ€§å¥½ï¼Œæ„å»ºå’Œè¡¨ç¤ºåˆ†ç¦»ã€‚
- æ‰©å±•æ€§å¥½ï¼Œå„ä¸ªå…·ä½“çš„å»ºé€ è€…ç›¸äº’ç‹¬ç«‹ï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„è§£è€¦ã€‚
- å®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå»ºé€ è€…å¯ä»¥å¯¹åˆ›å»ºè¿‡ç¨‹é€æ­¥ç»†åŒ–ï¼Œè€Œä¸å¯¹å…¶å®ƒæ¨¡å—äº§ç”Ÿä»»ä½•å½±å“ï¼Œä¾¿äºæ§åˆ¶ç»†èŠ‚é£é™©ã€‚

å…¶ç¼ºç‚¹å¦‚ä¸‹ï¼š
- äº§å“çš„ç»„æˆéƒ¨åˆ†å¿…é¡»ç›¸åŒï¼Œè¿™é™åˆ¶äº†å…¶ä½¿ç”¨èŒƒå›´ã€‚
- å¦‚æœäº§å“çš„å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œå¦‚æœäº§å“å†…éƒ¨å‘ç”Ÿå˜åŒ–ï¼Œåˆ™å»ºé€ è€…ä¹Ÿè¦åŒæ­¥ä¿®æ”¹ï¼ŒåæœŸç»´æŠ¤æˆæœ¬è¾ƒå¤§ã€‚

å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼å’Œå·¥å‚æ¨¡å¼çš„å…³æ³¨ç‚¹ä¸åŒï¼šå»ºé€ è€…æ¨¡å¼æ³¨é‡é›¶éƒ¨ä»¶çš„ç»„è£…è¿‡ç¨‹ï¼Œè€Œå·¥å‚æ–¹æ³•æ¨¡å¼æ›´æ³¨é‡é›¶éƒ¨ä»¶çš„åˆ›å»ºè¿‡ç¨‹ï¼Œä½†ä¸¤è€…å¯ä»¥ç»“åˆä½¿ç”¨ã€‚

***

### å»ºé€ è€…æ¨¡å¼çš„ç»“æ„ä¸å®ç°

å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼ç”±äº§å“ã€æŠ½è±¡å»ºé€ è€…ã€å…·ä½“å»ºé€ è€…ã€æŒ‡æŒ¥è€…ç­‰ 4 ä¸ªè¦ç´ æ„æˆï¼Œç°åœ¨æˆ‘ä»¬æ¥åˆ†æå…¶åŸºæœ¬ç»“æ„å’Œå®ç°æ–¹æ³•ã€‚

#### å»ºé€ è€…æ¨¡å¼çš„ç»“æ„

å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼çš„ä¸»è¦è§’è‰²å¦‚ä¸‹ï¼š
1. äº§å“è§’è‰²ï¼ˆProductï¼‰ï¼šå®ƒæ˜¯åŒ…å«å¤šä¸ªç»„æˆéƒ¨ä»¶çš„å¤æ‚å¯¹è±¡ï¼Œç”±å…·ä½“å»ºé€ è€…æ¥åˆ›å»ºå…¶å„ä¸ªé›¶éƒ¨ä»¶ã€‚
2. æŠ½è±¡å»ºé€ è€…ï¼ˆBuilderï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ªåŒ…å«åˆ›å»ºäº§å“å„ä¸ªå­éƒ¨ä»¶çš„æŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œé€šå¸¸è¿˜åŒ…å«ä¸€ä¸ªè¿”å›å¤æ‚äº§å“çš„æ–¹æ³• getResult()ã€‚
3. å…·ä½“å»ºé€ è€…(Concrete Builderï¼‰ï¼šå®ç° Builder æ¥å£ï¼Œå®Œæˆå¤æ‚äº§å“çš„å„ä¸ªéƒ¨ä»¶çš„å…·ä½“åˆ›å»ºæ–¹æ³•ã€‚
4. æŒ‡æŒ¥è€…ï¼ˆDirectorï¼‰ï¼šå®ƒè°ƒç”¨å»ºé€ è€…å¯¹è±¡ä¸­çš„éƒ¨ä»¶æ„é€ ä¸è£…é…æ–¹æ³•å®Œæˆå¤æ‚å¯¹è±¡çš„åˆ›å»ºï¼Œåœ¨æŒ‡æŒ¥è€…ä¸­ä¸æ¶‰åŠå…·ä½“äº§å“çš„ä¿¡æ¯ã€‚

{% asset_img 1.gif %}

#### å»ºé€ è€…æ¨¡å¼çš„å®ç°

ä¸Šå›¾ç»™å‡ºäº†å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼çš„ä¸»è¦ç»“æ„ï¼Œå…¶ç›¸å…³ç±»çš„ä»£ç å¦‚ä¸‹ï¼š

(1) äº§å“è§’è‰²ï¼šåŒ…å«å¤šä¸ªç»„æˆéƒ¨ä»¶çš„å¤æ‚å¯¹è±¡ã€‚

``` java
class Product {
    private String partA;
    private String partB;
    private String partC;
    public void setPartA(String partA) {
        this.partA = partA;
    }
    public void setPartB(String partB) {
        this.partB = partB;
    }
    public void setPartC(String partC) {
        this.partC = partC;
    }
    public void show() {
        // æ˜¾ç¤ºäº§å“çš„ç‰¹æ€§
    }
}
```

(2) æŠ½è±¡å»ºé€ è€…ï¼šåŒ…å«åˆ›å»ºäº§å“å„ä¸ªå­éƒ¨ä»¶çš„æŠ½è±¡æ–¹æ³•ã€‚

``` java
abstract class Builder {
    // åˆ›å»ºäº§å“å¯¹è±¡
    protected Product product = new Product();
    public abstract void buildPartA();
    public abstract void buildPartB();
    public abstract void buildPartC();
    // è¿”å›äº§å“å¯¹è±¡
    public Product getResult() {
        return product;
    }
}
```

(3) å…·ä½“å»ºé€ è€…ï¼šå®ç°äº†æŠ½è±¡å»ºé€ è€…æ¥å£ã€‚

``` java
public class ConcreteBuilder extends Builder {
    public void buildPartA() {
        product.setPartA("å»ºé€  PartA");
    }
    public void buildPartB() {
        product.setPartB("å»ºé€  PartB");
    }
    public void buildPartC() {
        product.setPartC("å»ºé€  PartC");
    }
}
```

(4) æŒ‡æŒ¥è€…ï¼šè°ƒç”¨å»ºé€ è€…ä¸­çš„æ–¹æ³•å®Œæˆå¤æ‚å¯¹è±¡çš„åˆ›å»ºã€‚

``` java
class Director {
    private Builder builder;
    public Director(Builder builder) {
        this.builder = builder;
    }
    //äº§å“æ„å»ºä¸ç»„è£…æ–¹æ³•
    public Product construct() {
        builder.buildPartA();
        builder.buildPartB();
        builder.buildPartC();
        return builder.getResult();
    }
}
```

(5) å®¢æˆ·ç±»ã€‚

``` java
public class Client {
    public static void main(String[] args) {
        Builder builder = new ConcreteBuilder();
        Director director = new Director(builder);
        Product product = director.construct();
        product.show();
    }
}
```

***

### å»ºé€ è€…æ¨¡å¼çš„åº”ç”¨å®ä¾‹

#### ã€ä¾‹1ï¼šéšè—å†…éƒ¨å‚æ•°ã€‘ç”¨å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼æè¿°å®¢å…è£…ä¿®

åˆ†æï¼šå®¢å…è£…ä¿®æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œå®ƒåŒ…å«å¢™ä½“çš„è£…ä¿®ã€ç”µè§†æœºçš„é€‰æ‹©ã€æ²™å‘çš„è´­ä¹°ä¸å¸ƒå±€ç­‰ã€‚å®¢æˆ·æŠŠè£…ä¿®è¦æ±‚å‘Šè¯‰é¡¹ç›®ç»ç†ï¼Œé¡¹ç›®ç»ç†æŒ‡æŒ¥è£…ä¿®å·¥äººä¸€æ­¥æ­¥è£…ä¿®ï¼Œæœ€åå®Œæˆæ•´ä¸ªå®¢å…çš„è£…ä¿®ä¸å¸ƒå±€ï¼Œæ‰€ä»¥æœ¬å®ä¾‹ç”¨å»ºé€ è€…æ¨¡å¼å®ç°æ¯”è¾ƒé€‚åˆã€‚

è¿™é‡Œå®¢å…æ˜¯äº§å“ï¼ŒåŒ…æ‹¬å¢™ã€ç”µè§†å’Œæ²™å‘ç­‰ç»„æˆéƒ¨åˆ†ã€‚å…·ä½“è£…ä¿®å·¥äººæ˜¯å…·ä½“å»ºé€ è€…ï¼Œä»–ä»¬è´Ÿè´£è£…ä¿®ä¸å¢™ã€ç”µè§†å’Œæ²™å‘çš„å¸ƒå±€ã€‚é¡¹ç›®ç»ç†æ˜¯æŒ‡æŒ¥è€…ï¼Œä»–è´Ÿè´£æŒ‡æŒ¥è£…ä¿®å·¥äººè¿›è¡Œè£…ä¿®ã€‚

å¦å¤–ï¼Œå®¢å…ç±»ä¸­æä¾›äº† show() æ–¹æ³•ï¼Œå¯ä»¥å°†è£…ä¿®æ•ˆæœå›¾æ˜¾ç¤ºå‡ºæ¥ã€‚å®¢æˆ·ç«¯ç¨‹åºé€šè¿‡å¯¹è±¡ç”Ÿæˆå™¨ç±» ReadXML è¯»å– XML é…ç½®æ–‡ä»¶ä¸­çš„è£…ä¿®æ–¹æ¡ˆæ•°æ®ï¼Œè°ƒç”¨é¡¹ç›®ç»ç†è¿›è¡Œè£…ä¿®ã€‚

{% asset_img 2.gif %}

ç¨‹åºä»£ç å¦‚ä¸‹ï¼š

``` java
package Builder;
import java.awt.*;
import javax.swing.*;
public class ParlourDecorator {
    public static void main(String[] args) {
        try {
            Decorator d;
            d = (Decorator) ReadXML.getObject();
            ProjectManager m = new ProjectManager(d);
            Parlour p = m.decorate();
            p.show();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
}
// äº§å“ï¼šå®¢å…
class Parlour {
    private String wall;    //å¢™
    private String TV;    //ç”µè§†
    private String sofa;    //æ²™å‘ 
    public void setWall(String wall) {
        this.wall = wall;
    }
    public void setTV(String TV) {
        this.TV = TV;
    }
    public void setSofa(String sofa) {
        this.sofa = sofa;
    }
    public void show() {
        JFrame jf = new JFrame("å»ºé€ è€…æ¨¡å¼æµ‹è¯•");
        Container contentPane = jf.getContentPane();
        JPanel p = new JPanel();
        JScrollPane sp = new JScrollPane(p);
        String parlour = wall + TV + sofa;
        JLabel l = new JLabel(new ImageIcon("src/" + parlour + ".jpg"));
        p.setLayout(new GridLayout(1, 1));
        p.setBorder(BorderFactory.createTitledBorder("å®¢å…"));
        p.add(l);
        contentPane.add(sp, BorderLayout.CENTER);
        jf.pack();
        jf.setVisible(true);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
}
// æŠ½è±¡å»ºé€ è€…ï¼šè£…ä¿®å·¥äºº
abstract class Decorator {
    //åˆ›å»ºäº§å“å¯¹è±¡
    protected Parlour product = new Parlour();
    public abstract void buildWall();
    public abstract void buildTV();
    public abstract void buildSofa();
    //è¿”å›äº§å“å¯¹è±¡
    public Parlour getResult() {
        return product;
    }
}
// å…·ä½“å»ºé€ è€…ï¼šå…·ä½“è£…ä¿®å·¥äºº1
class ConcreteDecorator1 extends Decorator {
    public void buildWall() {
        product.setWall("w1");
    }
    public void buildTV() {
        product.setTV("TV1");
    }
    public void buildSofa() {
        product.setSofa("sf1");
    }
}
// å…·ä½“å»ºé€ è€…ï¼šå…·ä½“è£…ä¿®å·¥äºº2
class ConcreteDecorator2 extends Decorator {
    public void buildWall() {
        product.setWall("w2");
    }
    public void buildTV() {
        product.setTV("TV2");
    }
    public void buildSofa() {
        product.setSofa("sf2");
    }
}
// æŒ‡æŒ¥è€…ï¼šé¡¹ç›®ç»ç†
class ProjectManager {
    private Decorator builder;
    public ProjectManager(Decorator builder) {
        this.builder = builder;
    }
    //äº§å“æ„å»ºä¸ç»„è£…æ–¹æ³•
    public Parlour decorate() {
        builder.buildWall();
        builder.buildTV();
        builder.buildSofa();
        return builder.getResult();
    }
}
```

``` java
package Builder;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import java.io.File;
class ReadXML {
    public static Object getObject() {
        try {
            DocumentBuilderFactory dFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = dFactory.newDocumentBuilder();
            Document doc;
            doc = builder.parse(new File("src/Builder/config.xml"));
            NodeList nl = doc.getElementsByTagName("className");
            Node classNode = nl.item(0).getFirstChild();
            String cName = "Builder." + classNode.getNodeValue();
            System.out.println("æ–°ç±»åï¼š" + cName);
            Class<?> c = Class.forName(cName);
            Object obj = c.newInstance();
            return obj;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }
}
```

ç¨‹åºè¿è¡Œç»“æœå¦‚å›¾æ‰€ç¤º:

{% asset_img 3.webp %}

è¿™ç§builderæ˜¯éšè—çš„ï¼Œå†…éƒ¨çš„å‚æ•°ä¸å—æˆ‘ä»¬æ§åˆ¶ã€‚

#### ã€ä¾‹2ï¼šè‡ªå®šä¹‰å†…éƒ¨å‚æ•°ã€‘ç”¨å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼ç»„è£…ç”µè„‘

å½“ä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°å‚æ•°ä¸ªæ•°è¶…è¿‡4ä¸ªï¼Œè€Œä¸”è¿™äº›å‚æ•°æœ‰äº›æ˜¯å¯é€‰çš„å‚æ•°ï¼Œè€ƒè™‘ä½¿ç”¨æ„é€ è€…æ¨¡å¼ã€‚

``` java
public class Computer {
    private String cpu;//å¿…é¡»
    private String ram;//å¿…é¡»
    private int usbCount;//å¯é€‰
    private String keyboard;//å¯é€‰
    private String display;//å¯é€‰
}
```

ç¬¬ä¸€ï¼šæŠ˜å æ„é€ å‡½æ•°æ¨¡å¼ï¼ˆtelescoping constructor patternï¼‰ï¼Œè¿™ä¸ªæˆ‘ä»¬ç»å¸¸ç”¨ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

``` java
public class Computer {
    // ...
    public Computer(String cpu, String ram) {
        this(cpu, ram, 0);
    }
    public Computer(String cpu, String ram, int usbCount) {
        this(cpu, ram, usbCount, "ç½—æŠ€é”®ç›˜");
    }
    public Computer(String cpu, String ram, int usbCount, String keyboard) {
        this(cpu, ram, usbCount, keyboard, "ä¸‰æ˜Ÿæ˜¾ç¤ºå™¨");
    }
    public Computer(String cpu, String ram, int usbCount, String keyboard, String display) {
        this.cpu = cpu;
        this.ram = ram;
        this.usbCount = usbCount;
        this.keyboard = keyboard;
        this.display = display;
    }
}
```

ç¬¬äºŒç§ï¼šJavabean æ¨¡å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

``` java
public class Computer {
    // ...
    public String getCpu() {
        return cpu;
    }
    public void setCpu(String cpu) {
        this.cpu = cpu;
    }
    public String getRam() {
        return ram;
    }
    public void setRam(String ram) {
        this.ram = ram;
    }
    public int getUsbCount() {
        return usbCount;
    }
    // ...
}
```

è¿™ä¸¤ç§æ–¹å¼çš„å¼Šç«¯å¦‚ä¸‹ï¼š

ç¬¬ä¸€ç§ä¸»è¦æ˜¯ä½¿ç”¨åŠé˜…è¯»ä¸æ–¹ä¾¿ã€‚ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ è¦è°ƒç”¨ä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°æ—¶ï¼Œä½ é¦–å…ˆè¦å†³å®šä½¿ç”¨å“ªä¸€ä¸ªï¼Œç„¶åé‡Œé¢åˆæ˜¯ä¸€å †å‚æ•°ï¼Œå¦‚æœè¿™äº›å‚æ•°çš„ç±»å‹å¾ˆå¤šåˆéƒ½ä¸€æ ·ï¼Œä½ è¿˜è¦ææ¸…æ¥šè¿™äº›å‚æ•°çš„å«ä¹‰ï¼Œå¾ˆå®¹æ˜“å°±ä¼ æ··äº†ã€‚

ç¬¬äºŒç§æ–¹å¼åœ¨æ„å»ºè¿‡ç¨‹ä¸­å¯¹è±¡çš„çŠ¶æ€å®¹æ˜“å‘ç”Ÿå˜åŒ–ï¼Œé€ æˆé”™è¯¯ã€‚å› ä¸ºé‚£ä¸ªç±»ä¸­çš„å±æ€§æ˜¯åˆ†æ­¥è®¾ç½®çš„ï¼Œæ‰€ä»¥å°±å®¹æ˜“å‡ºé”™ã€‚

ä¸ºäº†è§£å†³è¿™ä¸¤ä¸ªç—›ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨builderæ¨¡å¼ã€‚

1. åœ¨Computer ä¸­åˆ›å»ºä¸€ä¸ªé™æ€å†…éƒ¨ç±» Builderï¼Œç„¶åå°†Computer ä¸­çš„å‚æ•°éƒ½å¤åˆ¶åˆ°Builderç±»ä¸­ã€‚
2. åœ¨Computerä¸­åˆ›å»ºä¸€ä¸ªprivateçš„æ„é€ å‡½æ•°ï¼Œå‚æ•°ä¸ºBuilderç±»å‹
3. åœ¨Builderä¸­åˆ›å»ºä¸€ä¸ªpublicçš„æ„é€ å‡½æ•°ï¼Œå‚æ•°ä¸ºComputerä¸­å¿…å¡«çš„é‚£äº›å‚æ•°ï¼Œcpu å’Œramã€‚
4. åœ¨Builderä¸­åˆ›å»ºè®¾ç½®å‡½æ•°ï¼Œå¯¹Computerä¸­é‚£äº›å¯é€‰å‚æ•°è¿›è¡Œèµ‹å€¼ï¼Œè¿”å›å€¼ä¸ºBuilderç±»å‹çš„å®ä¾‹
5. åœ¨Builderä¸­åˆ›å»ºä¸€ä¸ªbuild()æ–¹æ³•ï¼Œåœ¨å…¶ä¸­æ„å»ºComputerçš„å®ä¾‹å¹¶è¿”å›

``` java
public class Computer {
    private final String cpu;//å¿…é¡»
    private final String ram;//å¿…é¡»
    private final int usbCount;//å¯é€‰
    private final String keyboard;//å¯é€‰
    private final String display;//å¯é€‰

    private Computer(Builder builder){
        this.cpu = builder.cpu;
        this.ram = builder.ram;
        this.usbCount = builder.usbCount;
        this.keyboard = builder.keyboard;
        this.display = builder.display;
    }
    public static class Builder{
        private String cpu;//å¿…é¡»
        private String ram;//å¿…é¡»
        private int usbCount;//å¯é€‰
        private String keyboard;//å¯é€‰
        private String display;//å¯é€‰

        public Builder(String cup, String ram){
            this.cpu = cup;
            this.ram = ram;
        }

        public Builder setUsbCount(int usbCount) {
            this.usbCount = usbCount;
            return this;
        }
        public Builder setKeyboard(String keyboard) {
            this.keyboard = keyboard;
            return this;
        }
        public Builder setDisplay(String display) {
            this.display = display;
            return this;
        }        
        public Computer build(){
            return new Computer(this);
        }
    }
    // çœç•¥getteræ–¹æ³•
}
```

ä½¿ç”¨çš„æ—¶å€™ï¼Œåœ¨å®¢æˆ·ç«¯ä½¿ç”¨é“¾å¼è°ƒç”¨ï¼Œä¸€æ­¥ä¸€æ­¥çš„æŠŠå¯¹è±¡æ„å»ºå‡ºæ¥ã€‚

``` java
Computer computer=new Computer.Builder("å› ç‰¹å°”","ä¸‰æ˜Ÿ")
                .setDisplay("ä¸‰æ˜Ÿ24å¯¸")
                .setKeyboard("ç½—æŠ€")
                .setUsbCount(2)
                .build();
```

å»ºé€ è€…æ¨¡å¼æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨è€Œå¸¸è§çš„åˆ›å»ºç±»å‹çš„æ¨¡å¼ï¼ˆcreational design pattern)ï¼Œåœ¨Androidä¸­ä¾‹å¦‚å›¾ç‰‡å¤„ç†æ¡†æ¶Glideï¼Œç½‘ç»œè¯·æ±‚æ¡†æ¶Retrofitç­‰éƒ½ä½¿ç”¨äº†æ­¤æ¨¡å¼ã€‚

åœ¨ä¸Šé¢è¿™ä¸ªå¸¸ç”¨çš„å»ºé€ è€…æ¨¡å¼å˜ä½“ä¸­ï¼Œ4ä¸ªè§’è‰²è¡¨ç¤ºå¦‚ä¸‹ï¼š

- Product: æœ€ç»ˆè¦ç”Ÿæˆçš„å¯¹è±¡ï¼Œä¾‹å¦‚ Computerå®ä¾‹ã€‚
- Builderï¼š æ„å»ºè€…çš„æŠ½è±¡åŸºç±»ï¼ˆæœ‰æ—¶ä¼šä½¿ç”¨æ¥å£ä»£æ›¿ï¼‰ã€‚å…¶å®šä¹‰äº†æ„å»ºProductçš„æŠ½è±¡æ­¥éª¤ï¼Œå…¶å®ä½“ç±»éœ€è¦å®ç°è¿™äº›æ­¥éª¤ã€‚å…¶ä¼šåŒ…å«ä¸€ä¸ªç”¨æ¥è¿”å›æœ€ç»ˆäº§å“çš„æ–¹æ³•Product getProduct()ã€‚
- ConcreteBuilder: Builderçš„å®ç°ç±»ã€‚
- Director: å†³å®šå¦‚ä½•æ„å»ºæœ€ç»ˆäº§å“çš„ç®—æ³•. å…¶ä¼šåŒ…å«ä¸€ä¸ªè´Ÿè´£ç»„è£…çš„æ–¹æ³•void Construct(Builder builder)ï¼Œ åœ¨è¿™ä¸ªæ–¹æ³•ä¸­é€šè¿‡è°ƒç”¨builderçš„æ–¹æ³•ï¼Œå°±å¯ä»¥è®¾ç½®builderï¼Œç­‰è®¾ç½®å®Œæˆåï¼Œå°±å¯ä»¥é€šè¿‡builderçš„ getProduct() æ–¹æ³•è·å¾—æœ€ç»ˆçš„äº§å“ã€‚

å½“ç„¶äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨**ä¾‹1**é‚£ç§ä¼ ç»Ÿæ–¹å¼æ¥å®ç°ï¼š

ç¬¬ä¸€æ­¥ï¼šæˆ‘ä»¬çš„ç›®æ ‡Computerç±»ï¼š

``` java
public class Computer {
    private String cpu;//å¿…é¡»
    private String ram;//å¿…é¡»
    private int usbCount;//å¯é€‰
    private String keyboard;//å¯é€‰
    private String display;//å¯é€‰

    public Computer(String cpu, String ram) {
        this.cpu = cpu;
        this.ram = ram;
    }
    public void setUsbCount(int usbCount) {
        this.usbCount = usbCount;
    }
    public void setKeyboard(String keyboard) {
        this.keyboard = keyboard;
    }
    public void setDisplay(String display) {
        this.display = display;
    }
    @Override
    public String toString() {
        return "Computer{" +
                "cpu='" + cpu + '\'' +
                ", ram='" + ram + '\'' +
                ", usbCount=" + usbCount +
                ", keyboard='" + keyboard + '\'' +
                ", display='" + display + '\'' +
                '}';
    }
}
```

ç¬¬äºŒæ­¥ï¼šæŠ½è±¡æ„å»ºè€…ç±»

``` java
public abstract class ComputerBuilder {
    public abstract void setUsbCount();
    public abstract void setKeyboard();
    public abstract void setDisplay();
    public abstract Computer getComputer();
}
```

ç¬¬ä¸‰æ­¥ï¼šå®ä½“æ„å»ºè€…ç±»ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¦æ„å»ºçš„äº§å“ç§ç±»äº§ç”Ÿå¤šäº†å®ä½“æ„å»ºè€…ç±»ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸¤ç§å“ç‰Œçš„ç”µè„‘ï¼Œè‹¹æœç”µè„‘å’Œè”æƒ³ç”µè„‘ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”Ÿæˆäº†ä¸¤ä¸ªå®ä½“æ„å»ºè€…ç±»ã€‚

``` java
public class MacComputerBuilder extends ComputerBuilder {
    private Computer computer;
    public MacComputerBuilder(String cpu, String ram) {
        computer = new Computer(cpu, ram);
    }
    @Override
    public void setUsbCount() {
        computer.setUsbCount(2);
    }
    @Override
    public void setKeyboard() {
        computer.setKeyboard("è‹¹æœé”®ç›˜");
    }
    @Override
    public void setDisplay() {
        computer.setDisplay("è‹¹æœæ˜¾ç¤ºå™¨");
    }
    @Override
    public Computer getComputer() {
        return computer;
    }
}
```

``` java
public class LenovoComputerBuilder extends ComputerBuilder {
    private Computer computer;
    public LenovoComputerBuilder(String cpu, String ram) {
        computer=new Computer(cpu,ram);
    }
    @Override
    public void setUsbCount() {
        computer.setUsbCount(4);
    }
    @Override
    public void setKeyboard() {
        computer.setKeyboard("è”æƒ³é”®ç›˜");
    }
    @Override
    public void setDisplay() {
        computer.setDisplay("è”æƒ³æ˜¾ç¤ºå™¨");
    }
    @Override
    public Computer getComputer() {
        return computer;
    }
}
```

ç¬¬å››æ­¥ï¼šæŒ‡å¯¼è€…ç±»ï¼ˆDirectorï¼‰

``` java
public class ComputerDirector {
    public void makeComputer(ComputerBuilder builder){
        builder.setUsbCount();
        builder.setDisplay();
        builder.setKeyboard();
    }
}
```

ä½¿ç”¨çš„æ—¶å€™ï¼Œé¦–å…ˆç”Ÿæˆä¸€ä¸ªdirector (1)ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªç›®æ ‡builder (2)ï¼Œæ¥ç€ä½¿ç”¨directorç»„è£…builder (3),ç»„è£…å®Œæ¯•åä½¿ç”¨builderåˆ›å»ºäº§å“å®ä¾‹ (4)ã€‚

``` java
public static void main(String[] args) {
    ComputerDirector director=new ComputerDirector();//1
    ComputerBuilder builder=new MacComputerBuilder("I5å¤„ç†å™¨","ä¸‰æ˜Ÿ125");//2
    director.makeComputer(builder);//3
    Computer macComputer=builder.getComputer();//4
    System.out.println("mac computer:"+macComputer.toString());

    ComputerBuilder lenovoBuilder=new LenovoComputerBuilder("I7å¤„ç†å™¨","æµ·åŠ›å£«222");
    director.makeComputer(lenovoBuilder);
    Computer lenovoComputer=lenovoBuilder.getComputer();
    System.out.println("lenovo computer:"+lenovoComputer.toString());
}
```

å¯ä»¥çœ‹åˆ°ï¼Œä¾‹2æœ€å¼€å§‹çš„ä½¿ç”¨æ–¹å¼æ˜¯ä¼ ç»Ÿbuilderæ¨¡å¼çš„å˜ç§ï¼Œ é¦–å…ˆå…¶çœç•¥äº†director è¿™ä¸ªè§’è‰²ï¼Œå°†æ„å»ºç®—æ³•äº¤ç»™äº†clientç«¯ï¼Œå…¶æ¬¡å°† builder å†™åˆ°äº†è¦æ„å»ºçš„äº§å“ç±»é‡Œé¢ï¼Œæœ€åé‡‡ç”¨äº†é“¾å¼è°ƒç”¨ã€‚

***

### å‚è€ƒèµ„æ–™

> <http://c.biancheng.net/view/1354.html>
> <https://zhuanlan.zhihu.com/p/58093669>
