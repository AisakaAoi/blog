---
title: è®¾è®¡æ¨¡å¼-è¡Œä¸ºå‹æ¨¡å¼-ä¸­ä»‹è€…æ¨¡å¼
categories:
  - ğŸŒ™å¤§å­¦è¯¾ç¨‹
abbrlink: '89874411'
date: 2021-01-13 22:11:42
tags:
---

### ä¸­ä»‹è€…æ¨¡å¼

åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œå¸¸å¸¸ä¼šå‡ºç°å¥½å¤šå¯¹è±¡ä¹‹é—´å­˜åœ¨å¤æ‚çš„äº¤äº’å…³ç³»ï¼Œè¿™ç§äº¤äº’å…³ç³»å¸¸å¸¸æ˜¯â€œç½‘çŠ¶ç»“æ„â€ï¼Œå®ƒè¦æ±‚æ¯ä¸ªå¯¹è±¡éƒ½å¿…é¡»çŸ¥é“å®ƒéœ€è¦äº¤äº’çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸ªäººå¿…é¡»è®°ä½ä»–ï¼ˆå¥¹ï¼‰æ‰€æœ‰æœ‹å‹çš„ç”µè¯ï¼›è€Œä¸”ï¼Œæœ‹å‹ä¸­å¦‚æœæœ‰äººçš„ç”µè¯ä¿®æ”¹äº†ï¼Œä»–ï¼ˆå¥¹ï¼‰å¿…é¡»è®©å…¶ä»–æ‰€æœ‰çš„æœ‹å‹ä¸€èµ·ä¿®æ”¹ï¼Œè¿™å«ä½œâ€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€ï¼Œéå¸¸å¤æ‚ã€‚

å¦‚æœæŠŠè¿™ç§â€œç½‘çŠ¶ç»“æ„â€æ”¹ä¸ºâ€œæ˜Ÿå½¢ç»“æ„â€çš„è¯ï¼Œå°†å¤§å¤§é™ä½å®ƒä»¬ä¹‹é—´çš„â€œè€¦åˆæ€§â€ï¼Œè¿™æ—¶åªè¦æ‰¾ä¸€ä¸ªâ€œä¸­ä»‹è€…â€å°±å¯ä»¥äº†ã€‚å¦‚å‰é¢æ‰€è¯´çš„â€œæ¯ä¸ªäººå¿…é¡»è®°ä½æ‰€æœ‰æœ‹å‹ç”µè¯â€çš„é—®é¢˜ï¼Œåªè¦åœ¨ç½‘ä¸Šå»ºç«‹ä¸€ä¸ªæ¯ä¸ªæœ‹å‹éƒ½å¯ä»¥è®¿é—®çš„â€œé€šä¿¡å½•â€å°±è§£å†³äº†ã€‚è¿™æ ·çš„ä¾‹å­è¿˜æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ï¼Œä½ åˆšåˆšå‚åŠ å·¥ä½œæƒ³ç§Ÿæˆ¿ï¼Œå¯ä»¥æ‰¾â€œæˆ¿å±‹ä¸­ä»‹â€ï¼›æˆ–è€…ï¼Œè‡ªå·±åˆšåˆšåˆ°ä¸€ä¸ªé™Œç”ŸåŸå¸‚æ‰¾å·¥ä½œï¼Œå¯ä»¥æ‰¾â€œäººæ‰äº¤æµä¸­å¿ƒâ€å¸®å¿™ã€‚

åœ¨è½¯ä»¶çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿™æ ·çš„ä¾‹å­ä¹Ÿå¾ˆå¤šï¼Œä¾‹å¦‚ï¼Œåœ¨ MVC æ¡†æ¶ä¸­ï¼Œæ§åˆ¶å™¨ï¼ˆCï¼‰å°±æ˜¯æ¨¡å‹ï¼ˆMï¼‰å’Œè§†å›¾ï¼ˆVï¼‰çš„ä¸­ä»‹è€…ï¼›è¿˜æœ‰å¤§å®¶å¸¸ç”¨çš„ QQ èŠå¤©ç¨‹åºçš„â€œä¸­ä»‹è€…â€æ˜¯ QQ æœåŠ¡å™¨ã€‚æ‰€æœ‰è¿™äº›ï¼Œéƒ½å¯ä»¥é‡‡ç”¨â€œä¸­ä»‹è€…æ¨¡å¼â€æ¥å®ç°ï¼Œå®ƒå°†å¤§å¤§é™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ€§ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§ã€‚

***

<!--more-->

### æ¨¡å¼çš„å®šä¹‰ä¸ç‰¹ç‚¹

**ä¸­ä»‹è€…ï¼ˆMediatorï¼‰æ¨¡å¼çš„å®šä¹‰ï¼š**å®šä¹‰ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œä½¿åŸæœ‰å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ¾æ•£ï¼Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚ä¸­ä»‹è€…æ¨¡å¼åˆå«è°ƒåœæ¨¡å¼ï¼Œå®ƒæ˜¯è¿ªç±³ç‰¹æ³•åˆ™çš„å…¸å‹åº”ç”¨ã€‚

ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…¶ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š
1. ç±»ä¹‹é—´å„å¸å…¶èŒï¼Œç¬¦åˆè¿ªç±³ç‰¹æ³•åˆ™ã€‚
2. é™ä½äº†å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ€§ï¼Œä½¿å¾—å¯¹è±¡æ˜“äºç‹¬ç«‹åœ°è¢«å¤ç”¨ã€‚
3. å°†å¯¹è±¡é—´çš„ä¸€å¯¹å¤šå…³è”è½¬å˜ä¸ºä¸€å¯¹ä¸€çš„å…³è”ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œä½¿å¾—ç³»ç»Ÿæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚

å…¶ä¸»è¦ç¼ºç‚¹æ˜¯ï¼š
1. ä¸­ä»‹è€…æ¨¡å¼å°†åŸæœ¬å¤šä¸ªå¯¹è±¡ç›´æ¥çš„ç›¸äº’ä¾èµ–å˜æˆäº†ä¸­ä»‹è€…å’Œå¤šä¸ªåŒäº‹ç±»çš„ä¾èµ–å…³ç³»ã€‚å½“åŒäº‹ç±»è¶Šå¤šæ—¶ï¼Œä¸­ä»‹è€…å°±ä¼šè¶Šè‡ƒè‚¿ï¼Œå˜å¾—å¤æ‚ä¸”éš¾ä»¥ç»´æŠ¤ã€‚

***

### æ¨¡å¼çš„ç»“æ„ä¸å®ç°

ä¸­ä»‹è€…æ¨¡å¼å®ç°çš„å…³é”®æ˜¯æ‰¾å‡ºâ€œä¸­ä»‹è€…â€ï¼Œä¸‹é¢å¯¹å®ƒçš„ç»“æ„å’Œå®ç°è¿›è¡Œåˆ†æã€‚

#### æ¨¡å¼çš„ç»“æ„

ä¸­ä»‹è€…æ¨¡å¼åŒ…å«ä»¥ä¸‹ä¸»è¦è§’è‰²ï¼š
1. æŠ½è±¡ä¸­ä»‹è€…ï¼ˆMediatorï¼‰è§’è‰²ï¼šå®ƒæ˜¯ä¸­ä»‹è€…çš„æ¥å£ï¼Œæä¾›äº†åŒäº‹å¯¹è±¡æ³¨å†Œä¸è½¬å‘åŒäº‹å¯¹è±¡ä¿¡æ¯çš„æŠ½è±¡æ–¹æ³•ã€‚
2. å…·ä½“ä¸­ä»‹è€…ï¼ˆConcrete Mediatorï¼‰è§’è‰²ï¼šå®ç°ä¸­ä»‹è€…æ¥å£ï¼Œå®šä¹‰ä¸€ä¸ª List æ¥ç®¡ç†åŒäº‹å¯¹è±¡ï¼Œåè°ƒå„ä¸ªåŒäº‹è§’è‰²ä¹‹é—´çš„äº¤äº’å…³ç³»ï¼Œå› æ­¤å®ƒä¾èµ–äºåŒäº‹è§’è‰²ã€‚
3. æŠ½è±¡åŒäº‹ç±»ï¼ˆColleagueï¼‰è§’è‰²ï¼šå®šä¹‰åŒäº‹ç±»çš„æ¥å£ï¼Œä¿å­˜ä¸­ä»‹è€…å¯¹è±¡ï¼Œæä¾›åŒäº‹å¯¹è±¡äº¤äº’çš„æŠ½è±¡æ–¹æ³•ï¼Œå®ç°æ‰€æœ‰ç›¸äº’å½±å“çš„åŒäº‹ç±»çš„å…¬å…±åŠŸèƒ½ã€‚
4. å…·ä½“åŒäº‹ç±»ï¼ˆConcrete Colleagueï¼‰è§’è‰²ï¼šæ˜¯æŠ½è±¡åŒäº‹ç±»çš„å®ç°è€…ï¼Œå½“éœ€è¦ä¸å…¶ä»–åŒäº‹å¯¹è±¡äº¤äº’æ—¶ï¼Œç”±ä¸­ä»‹è€…å¯¹è±¡è´Ÿè´£åç»­çš„äº¤äº’ã€‚

{% asset_img 1.gif %}

#### æ¨¡å¼çš„å®ç°

ä¸­ä»‹è€…æ¨¡å¼çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š

``` java
package net.biancheng.c.mediator;
import java.util.*;
public class MediatorPattern {
    public static void main(String[] args) {
        Mediator md = new ConcreteMediator();
        Colleague c1, c2;
        c1 = new ConcreteColleague1();
        c2 = new ConcreteColleague2();
        md.register(c1);
        md.register(c2);
        c1.send();
        System.out.println("-------------");
        c2.send();
    }
}
// æŠ½è±¡ä¸­ä»‹è€…
abstract class Mediator {
    public abstract void register(Colleague colleague);
    public abstract void relay(Colleague cl); // è½¬å‘
}
// å…·ä½“ä¸­ä»‹è€…
class ConcreteMediator extends Mediator {
    private List<Colleague> colleagues = new ArrayList<Colleague>();
    public void register(Colleague colleague) {
        if (!colleagues.contains(colleague)) {
            colleagues.add(colleague);
            colleague.setMedium(this);
        }
    }
    public void relay(Colleague cl) {
        for (Colleague ob : colleagues) {
            if (!ob.equals(cl)) {
                ((Colleague) ob).receive();
            }
        }
    }
}
// æŠ½è±¡åŒäº‹ç±»
abstract class Colleague {
    protected Mediator mediator;
    public void setMedium(Mediator mediator) {
        this.mediator = mediator;
    }
    public abstract void receive();
    public abstract void send();
}
// å…·ä½“åŒäº‹ç±»
class ConcreteColleague1 extends Colleague {
    public void receive() {
        System.out.println("å…·ä½“åŒäº‹ç±»1æ”¶åˆ°è¯·æ±‚ã€‚");
    }
    public void send() {
        System.out.println("å…·ä½“åŒäº‹ç±»1å‘å‡ºè¯·æ±‚ã€‚");
        mediator.relay(this); // è¯·ä¸­ä»‹è€…è½¬å‘
    }
}
// å…·ä½“åŒäº‹ç±»
class ConcreteColleague2 extends Colleague {
    public void receive() {
        System.out.println("å…·ä½“åŒäº‹ç±»2æ”¶åˆ°è¯·æ±‚ã€‚");
    }
    public void send() {
        System.out.println("å…·ä½“åŒäº‹ç±»2å‘å‡ºè¯·æ±‚ã€‚");
        mediator.relay(this); // è¯·ä¸­ä»‹è€…è½¬å‘
    }
}
```

ç¨‹åºçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š

```
å…·ä½“åŒäº‹ç±»1å‘å‡ºè¯·æ±‚ã€‚
å…·ä½“åŒäº‹ç±»2æ”¶åˆ°è¯·æ±‚ã€‚
-------------
å…·ä½“åŒäº‹ç±»2å‘å‡ºè¯·æ±‚ã€‚
å…·ä½“åŒäº‹ç±»1æ”¶åˆ°è¯·æ±‚ã€‚
```

***

### æ¨¡å¼çš„åº”ç”¨å®ä¾‹

#### ã€ä¾‹1ã€‘ç”¨ä¸­ä»‹è€…æ¨¡å¼ç¼–å†™ä¸€ä¸ªâ€œéŸ¶å…³æˆ¿åœ°äº§äº¤æµå¹³å°â€ç¨‹åº

è¯´æ˜ï¼šéŸ¶å…³æˆ¿åœ°äº§äº¤æµå¹³å°æ˜¯â€œæˆ¿åœ°äº§ä¸­ä»‹å…¬å¸â€æä¾›ç»™â€œå–æ–¹å®¢æˆ·â€ä¸â€œä¹°æ–¹å®¢æˆ·â€è¿›è¡Œä¿¡æ¯äº¤æµçš„å¹³å°ï¼Œæ¯”è¾ƒé€‚åˆç”¨ä¸­ä»‹è€…æ¨¡å¼æ¥å®ç°ã€‚

é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªä¸­ä»‹å…¬å¸ï¼ˆMediumï¼‰æ¥å£ï¼Œå®ƒæ˜¯æŠ½è±¡ä¸­ä»‹è€…ï¼Œå®ƒåŒ…å«äº†å®¢æˆ·æ³¨å†Œæ–¹æ³• register(Customer member) å’Œä¿¡æ¯è½¬å‘æ–¹æ³• relay(String from,String ad)ï¼›å†å®šä¹‰ä¸€ä¸ªéŸ¶å…³æˆ¿åœ°äº§ä¸­ä»‹ï¼ˆEstateMediumï¼‰å…¬å¸ï¼Œå®ƒæ˜¯å…·ä½“ä¸­ä»‹è€…ç±»ï¼Œå®ƒåŒ…å«äº†ä¿å­˜å®¢æˆ·ä¿¡æ¯çš„ List å¯¹è±¡ï¼Œå¹¶å®ç°äº†ä¸­ä»‹å…¬å¸ä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚

ç„¶åï¼Œå®šä¹‰ä¸€ä¸ªå®¢æˆ·ï¼ˆCustomerï¼‰ç±»ï¼Œå®ƒæ˜¯æŠ½è±¡åŒäº‹ç±»ï¼Œå…¶ä¸­åŒ…å«äº†ä¸­ä»‹è€…çš„å¯¹è±¡ï¼Œå’Œå‘é€ä¿¡æ¯çš„ send(String ad) æ–¹æ³•ä¸æ¥æ”¶ä¿¡æ¯çš„ receive(String fromï¼ŒString ad) æ–¹æ³•çš„æ¥å£ï¼Œç”±äºæœ¬ç¨‹åºæ˜¯çª—ä½“ç¨‹åºï¼Œæ‰€ä»¥æœ¬ç±»ç»§æ‰¿ JPmme ç±»ï¼Œå¹¶å®ç°åŠ¨ä½œäº‹ä»¶çš„å¤„ç†æ–¹æ³• actionPerformed(ActionEvent e)ã€‚

æœ€åï¼Œå®šä¹‰å–æ–¹ï¼ˆSellerï¼‰ç±»å’Œä¹°æ–¹ï¼ˆBuyerï¼‰ç±»ï¼Œå®ƒä»¬æ˜¯å…·ä½“åŒäº‹ç±»ï¼Œæ˜¯å®¢æˆ·ï¼ˆCustomerï¼‰ç±»çš„å­ç±»ï¼Œå®ƒä»¬å®ç°äº†çˆ¶ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œé€šè¿‡ä¸­ä»‹è€…ç±»è¿›è¡Œä¿¡æ¯äº¤æµã€‚

{% asset_img 2.gif %}

ç¨‹åºä»£ç å¦‚ä¸‹ï¼š

``` java
package net.biancheng.c.mediator;
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
public class DatingPlatform {
    public static void main(String[] args) {
        Medium md = new EstateMedium();    // æˆ¿äº§ä¸­ä»‹
        Customer member1, member2;
        member1 = new Seller("å¼ ä¸‰(å–æ–¹)");
        member2 = new Buyer("æå››(ä¹°æ–¹)");
        md.register(member1); // å®¢æˆ·æ³¨å†Œ
        md.register(member2);
    }
}
// æŠ½è±¡ä¸­ä»‹è€…ï¼šä¸­ä»‹å…¬å¸
interface Medium {
    void register(Customer member); // å®¢æˆ·æ³¨å†Œ
    void relay(String from, String ad); // è½¬å‘
}
// å…·ä½“ä¸­ä»‹è€…ï¼šæˆ¿åœ°äº§ä¸­ä»‹
class EstateMedium implements Medium {
    private List<Customer> members = new ArrayList<Customer>();
    public void register(Customer member) {
        if (!members.contains(member)) {
            members.add(member);
            member.setMedium(this);
        }
    }
    public void relay(String from, String ad) {
        for (Customer ob : members) {
            String name = ob.getName();
            if (!name.equals(from)) {
                ((Customer) ob).receive(from, ad);
            }
        }
    }
}
// æŠ½è±¡åŒäº‹ç±»ï¼šå®¢æˆ·
abstract class Customer extends JFrame implements ActionListener {
    private static final long serialVersionUID = -7219939540794786080L;
    protected Medium medium;
    protected String name;
    JTextField SentText;
    JTextArea ReceiveArea;
    public Customer(String name) {
        super(name);
        this.name = name;
    }
    void ClientWindow(int x, int y) {
        Container cp;
        JScrollPane sp;
        JPanel p1, p2;
        cp = this.getContentPane();
        SentText = new JTextField(18);
        ReceiveArea = new JTextArea(10, 18);
        ReceiveArea.setEditable(false);
        p1 = new JPanel();
        p1.setBorder(BorderFactory.createTitledBorder("æ¥æ”¶å†…å®¹ï¼š"));
        p1.add(ReceiveArea);
        sp = new JScrollPane(p1);
        cp.add(sp, BorderLayout.NORTH);
        p2 = new JPanel();
        p2.setBorder(BorderFactory.createTitledBorder("å‘é€å†…å®¹ï¼š"));
        p2.add(SentText);
        cp.add(p2, BorderLayout.SOUTH);
        SentText.addActionListener(this);
        this.setLocation(x, y);
        this.setSize(250, 330);
        this.setResizable(false); // çª—å£å¤§å°ä¸å¯è°ƒæ•´
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);
    }
    public void actionPerformed(ActionEvent e) {
        String tempInfo = SentText.getText().trim();
        SentText.setText("");
        this.send(tempInfo);
    }
    public String getName() {
        return name;
    }
    public void setMedium(Medium medium) {
        this.medium = medium;
    }
    public abstract void send(String ad);
    public abstract void receive(String from, String ad);
}
// å…·ä½“åŒäº‹ç±»ï¼šå–æ–¹
class Seller extends Customer {
    private static final long serialVersionUID = -1443076716629516027L;
    public Seller(String name) {
        super(name);
        ClientWindow(50, 100);
    }
    public void send(String ad) {
        ReceiveArea.append("æˆ‘(å–æ–¹)è¯´: " + ad + "\n");
        // ä½¿æ»šåŠ¨æ¡æ»šåŠ¨åˆ°æœ€åº•ç«¯
        ReceiveArea.setCaretPosition(ReceiveArea.getText().length());
        medium.relay(name, ad);
    }
    public void receive(String from, String ad) {
        ReceiveArea.append(from + "è¯´: " + ad + "\n");
        // ä½¿æ»šåŠ¨æ¡æ»šåŠ¨åˆ°æœ€åº•ç«¯
        ReceiveArea.setCaretPosition(ReceiveArea.getText().length());
    }
}
// å…·ä½“åŒäº‹ç±»ï¼šä¹°æ–¹
class Buyer extends Customer {
    private static final long serialVersionUID = -474879276076308825L;
    public Buyer(String name) {
        super(name);
        ClientWindow(350, 100);
    }
    public void send(String ad) {
        ReceiveArea.append("æˆ‘(ä¹°æ–¹)è¯´: " + ad + "\n");
        // ä½¿æ»šåŠ¨æ¡æ»šåŠ¨åˆ°æœ€åº•ç«¯
        ReceiveArea.setCaretPosition(ReceiveArea.getText().length());
        medium.relay(name, ad);
    }
    public void receive(String from, String ad) {
        ReceiveArea.append(from + "è¯´: " + ad + "\n");
        // ä½¿æ»šåŠ¨æ¡æ»šåŠ¨åˆ°æœ€åº•ç«¯
        ReceiveArea.setCaretPosition(ReceiveArea.getText().length());
    }
}
```

ç¨‹åºçš„è¿è¡Œç»“æœå¦‚å›¾æ‰€ç¤ºï¼š

{% asset_img 3.gif %}

***

### æ¨¡å¼çš„åº”ç”¨åœºæ™¯

å‰é¢åˆ†æäº†ä¸­ä»‹è€…æ¨¡å¼çš„ç»“æ„ä¸ç‰¹ç‚¹ï¼Œä¸‹é¢åˆ†æå…¶ä»¥ä¸‹åº”ç”¨åœºæ™¯ï¼š
- å½“å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤æ‚çš„ç½‘çŠ¶ç»“æ„å…³ç³»è€Œå¯¼è‡´ä¾èµ–å…³ç³»æ··ä¹±ä¸”éš¾ä»¥å¤ç”¨æ—¶ã€‚
- å½“æƒ³åˆ›å»ºä¸€ä¸ªè¿è¡Œäºå¤šä¸ªç±»ä¹‹é—´çš„å¯¹è±¡ï¼Œåˆä¸æƒ³ç”Ÿæˆæ–°çš„å­ç±»æ—¶ã€‚

***

### æ¨¡å¼çš„æ‰©å±•

åœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸é‡‡ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ³•æ¥ç®€åŒ–ä¸­ä»‹è€…æ¨¡å¼ï¼Œä½¿å¼€å‘å˜å¾—æ›´ç®€å•ã€‚
1. ä¸å®šä¹‰ä¸­ä»‹è€…æ¥å£ï¼ŒæŠŠå…·ä½“ä¸­ä»‹è€…å¯¹è±¡å®ç°æˆä¸ºå•ä¾‹ã€‚
2. åŒäº‹å¯¹è±¡ä¸æŒæœ‰ä¸­ä»‹è€…ï¼Œè€Œæ˜¯åœ¨éœ€è¦çš„æ—¶å€™ç›´æ¥è·å–ä¸­ä»‹è€…å¯¹è±¡å¹¶è°ƒç”¨ã€‚

{% asset_img 4.gif %}

ç¨‹åºä»£ç å¦‚ä¸‹ï¼š

``` java
package net.biancheng.c.mediator;
import java.util.*;
public class SimpleMediatorPattern {
    public static void main(String[] args) {
        SimpleColleague c1, c2;
        c1 = new SimpleConcreteColleague1();
        c2 = new SimpleConcreteColleague2();
        c1.send();
        System.out.println("-----------------");
        c2.send();
    }
}
// ç®€å•å•ä¾‹ä¸­ä»‹è€…
class SimpleMediator {
    private static SimpleMediator smd = new SimpleMediator();
    private List<SimpleColleague> colleagues = new ArrayList<SimpleColleague>();
    private SimpleMediator() {
    }
    public static SimpleMediator getMedium() {
        return (smd);
    }
    public void register(SimpleColleague colleague) {
        if (!colleagues.contains(colleague)) {
            colleagues.add(colleague);
        }
    }
    public void relay(SimpleColleague scl) {
        for (SimpleColleague ob : colleagues) {
            if (!ob.equals(scl)) {
                ((SimpleColleague) ob).receive();
            }
        }
    }
}
// æŠ½è±¡åŒäº‹ç±»
interface SimpleColleague {
    void receive();
    void send();
}
// å…·ä½“åŒäº‹ç±»
class SimpleConcreteColleague1 implements SimpleColleague {
    SimpleConcreteColleague1() {
        SimpleMediator smd = SimpleMediator.getMedium();
        smd.register(this);
    }
    public void receive() {
        System.out.println("å…·ä½“åŒäº‹ç±»1ï¼šæ”¶åˆ°è¯·æ±‚ã€‚");
    }
    public void send() {
        SimpleMediator smd = SimpleMediator.getMedium();
        System.out.println("å…·ä½“åŒäº‹ç±»1ï¼šå‘å‡ºè¯·æ±‚...");
        smd.relay(this); // è¯·ä¸­ä»‹è€…è½¬å‘
    }
}
// å…·ä½“åŒäº‹ç±»
class SimpleConcreteColleague2 implements SimpleColleague {
    SimpleConcreteColleague2() {
        SimpleMediator smd = SimpleMediator.getMedium();
        smd.register(this);
    }
    public void receive() {
        System.out.println("å…·ä½“åŒäº‹ç±»2ï¼šæ”¶åˆ°è¯·æ±‚ã€‚");
    }
    public void send() {
        SimpleMediator smd = SimpleMediator.getMedium();
        System.out.println("å…·ä½“åŒäº‹ç±»2ï¼šå‘å‡ºè¯·æ±‚...");
        smd.relay(this); // è¯·ä¸­ä»‹è€…è½¬å‘
    }
}
```

ç¨‹åºè¿è¡Œç»“æœå¦‚ä¸‹ï¼š

```
å…·ä½“åŒäº‹ç±»1ï¼šå‘å‡ºè¯·æ±‚...
å…·ä½“åŒäº‹ç±»2ï¼šæ”¶åˆ°è¯·æ±‚ã€‚
-----------------
å…·ä½“åŒäº‹ç±»2ï¼šå‘å‡ºè¯·æ±‚...
å…·ä½“åŒäº‹ç±»1ï¼šæ”¶åˆ°è¯·æ±‚ã€‚
```

***

### å‚è€ƒèµ„æ–™

> <http://c.biancheng.net/view/1393.html>
